!function(){"use strict";angular.module("edtApp.sy",["sy.Dashboard","sy.Login","sy.RePwdReg","sy.UserJoin","sy.MyInfo","sy.CInfo","sy.User","sy.Atrt","sy.Mrk","sy.Code","sy.Dept","sy.Menu","sy.Notice","sy.Pars","sy.Qa","sy.Itl"])}(),function(){"use strict";var e=angular.module("sy.Dashboard",["sy.Dashboard.controller","sy.Dashboard.service"]);angular.module("sy.Dashboard.controller",[]),angular.module("sy.Dashboard.service",[]),e.config(["$stateProvider",function(e){e.state("app.syDashboard",{url:"/99sy/syDashboard?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy01Dashboard/templates/sy.Dashboard.tpl.html",controller:"sy.DashboardCtrl as vm",resolve:{resData:["AuthSvc","$q","UtilSvc",function(e,t,a){var r=t.defer(),i={};return e.isAccess().then(function(e){i.access=e[0];var n={noticeQa:{procedureParam:"USP_SY_01DASHBOARD07_GET"},cmrkPars:{procedureParam:"USP_SY_01DASHBOARD08_GET"},sacsCnt:{procedureParam:"USP_SY_01DASHBOARD09_GET"}};t.all([a.getList(n.noticeQa),a.getList(n.cmrkPars),a.getList(n.sacsCnt)]).then(function(e){i.mainOpen=e[0].data.results[0].length>0,i.subOpen=e[0].data.results[1].length>0,i.cmrkOpen=e[1].data.results[0].length>0&&e[1].data.results[0][0].CNT_NO_MRK>0,i.parsOpen=e[1].data.results[1].length>0&&e[1].data.results[1][0].CNT_CD_DEF>0,i.sacsCnt=e[2].data.results,r.resolve(i)})}),r.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Dashboard.controller").controller("sy.DashboardCtrl",["$scope","$http","$q","$log","sy.DashboardSvc","APP_CODE","$timeout","resData","Page","UtilSvc","ModalSvc","$state",function(e,t,a,r,i,n,s,l,o,d,c,u){var _=this,m=e.page=new o({auth:l.access}),p=(edt.getToday(),"DASHBOARD-LIST"),f=[{visible:!0,order:1,name:"sy.SaMonthCtrl",displayName:"주문월현황",templateURL:"app/contents/99sy/sy01Dashboard/templates/sy.SaMonth.tpl.html"},{visible:!0,order:2,name:"sy.MrkSaCntCtrl",displayName:"마켓별주문현황",templateURL:"app/contents/99sy/sy01Dashboard/templates/sy.MrkSaCnt.tpl.html"},{visible:!0,order:3,name:"sy.SaCntCtrl",displayName:"주문관련현황",templateURL:"app/contents/99sy/sy01Dashboard/templates/sy.SaCnt.tpl.html"}];_.allOpen=l.cmrkOpen&&l.parsOpen,_.sacsCnt=function(){for(var e=[],t=0;t<l.sacsCnt.length-1;t++)e[t]=l.sacsCnt[t].length>0?kendo.toString(l.sacsCnt[t][0].CNT_ORD,"n0","ko-KR"):"0";return e[l.sacsCnt.length-1]=l.sacsCnt[l.sacsCnt.length-1].length>0?kendo.toString(l.sacsCnt[l.sacsCnt.length-1][0].CNT_INQ,"n0","ko-KR"):"0",e}(),_.mainComponents={visible:!0,order:1,name:"sy.DashNoticeCtrl",displayName:"공지사항",templateURL:"app/contents/99sy/sy01Dashboard/templates/sy.Notice.tpl.html",open:l.mainOpen&&_.allOpen},_.subComponents={visible:!0,order:1,name:"sy.DashQaCtrl",displayName:"묻고답하기",templateURL:"app/contents/99sy/sy01Dashboard/templates/sy.Qa.tpl.html",open:l.subOpen&&_.allOpen},_.broadcast=function(){s(function(){e.$broadcast("dashboard:query",{tabName:_.tab.activeTabNm,code:_.code})},0)},_.removeDashboardSetting=function(){var e="설정된 정보를 초기화 하시겠습니까?";confirm(e)&&(d.localStorage.removeItem(p),_.components=angular.copy(f),_.broadcast())},_.openDashboardSetting=function(){var e=c.openConfirmPopup({templateUrl:"app/contents/99sy/sy01Dashboard/templates/sy.DashboardSetting.modal.tpl.html",controller:"sy.DashboardSettingModalCtrl",resolve:{payload:function(){return{data:_.components}}}});e.result.then(function(e){_.components=e,_.broadcast(),d.localStorage.setItem(p,_.components)})},_.maintitle="시작",_.userJoinImg="/assets/img/userJoin.png",_.markImg=l.cmrkOpen?"/assets/img/markIn.png":"/assets/img/markOut.png",_.parsImg=l.parsOpen?"/assets/img/parsIn.png":"/assets/img/parsOut.png",_.saImg=_.allOpen?"/assets/img/saIn.png":"/assets/img/saOut.png",_.arrowImg=_.allOpen?"/assets/img/arrowIn.png":"/assets/img/arrowOut.png",_.markmanagerClick=function(){u.go("app.syMrk",{kind:null,menu:null})},_.parsClick=function(){u.go("app.syPars",{kind:null,menu:null})};var D=d.localStorage.getItem("activeTabName")||"CHART",C=[!!D&&"CHART"===D,!!D&&"TABLE"===D];_.tab={activeTabNm:D,tabs:[{active:C[0],name:"CHART"},{active:C[1],name:"TABLE"}],changeTab:function(e,t){e.preventDefault();var a=this;a.activeTabNm!==t.name&&(a.tabs.forEach(function(e){e.active=!1}),a.activeTabNm=t.name,t.active=!0,d.localStorage.setItem("activeTabName",t.name),_.broadcast())},equalsTabName:function(e){return e===this.activeTabNm}},_.components=angular.copy(f),_.changeComponent=function(){_.components[0].order=2,_.components[1].order=1},_.removeComponent=function(){_.components[0].visible=!1},_.addComponent=function(){_.components[0].order=1,_.components[1].order=2,_.components[0].visible=!0,_.broadcast()},m.bootstrap(function(){_.allOpen&&s(function(){_.broadcast()},500)})}])}(),function(){"use strict";angular.module("sy.Dashboard.controller").controller("sy.DashboardSettingModalCtrl",["$scope","$modalInstance","payload",function(e,t,a){e.options={data:angular.copy(a.data,[])},e.cancel=function(){t.dismiss("cancel")},e.confirm=function(){angular.forEach(e.options.data,function(e){delete e.uuid}),t.close(e.options.data)},e.upItem=function(){e.options.api.upSelectedItem()},e.downItem=function(){e.options.api.downSelectedItem()}}])}(),function(){"use strict";angular.module("sy.Dashboard.controller").controller("sy.DashNoticeCtrl",["$scope","sy.DashboardSvc","$timeout","UtilSvc","APP_CONFIG",function(e,t,a,r,i){e.$on("dashboard:query",function(e,r){t.setPayload(l,r),a(function(){l.find()})});var n=edt.getToday(),s=({startYear:n.y,startMonth:n.m,endYear:n.y,endMonth:n.m},{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}),l=e.notice={tabName:"",code:{},find:function(){l.gridNoticeVO.dataSource.read()}};$("#divNoticeGrd").delegate("tbody>tr","dblclick",function(){$("#divNoticeGrd").data("kendoGrid");$("#divNoticeGrd").data("kendoGrid").editRow($(this))}),r.gridtooltipOptions.filter="td",l.tooltipOptions=r.gridtooltipOptions,l.gridNoticeVO={autoBind:!1,messages:{requestFailed:"공지사항정보를 가져오는 중 오류가 발생하였습니다.",noRecords:"검색된 데이터가 없습니다."},boxTitle:"공지 리스트",url:i.domain+"/ut05FileUpload",sortable:!0,pageable:{messages:r.gridPageableMessages},noRecords:!0,currentFileList:[],dataSource:new kendo.data.DataSource({transport:{read:function(e){var t={procedureParam:"USP_SY_01DASHBOARD01_GET"};r.getList(t).then(function(t){e.success(t.data.results[0])})}},pageSize:5,batch:!0,schema:{model:{id:"NO_NOTICE",fields:{ROW_NUM:{type:"string"},CD_NOTICE:{type:"string"},NM_SUBJECT:{type:"string"},DC_HTMLCONTENT:{type:"string"},DC_CONTENT:{type:"string"},DTS_INSERT:{type:"string"},NO_WRITE:{type:"string"},SY_FILES:{type:"string"}}}}}),selectable:"row",columns:[{field:"CD_NOTICE",title:"공지구분",width:70,headerAttributes:s},{field:"NM_SUBJECT",title:"제목",width:250,headerAttributes:s},{field:"DC_HTMLCONTENT",title:"공지내용",headerAttributes:s},{field:"DTS_INSERT",title:"공지일시",width:150,headerAttributes:s},{field:"NO_WRITE",title:"작성자",width:100,headerAttributes:s}],editable:{mode:"popup",window:{title:"공지 사항"},template:kendo.template($.trim($("#ma_notice_popup_template").html()))},edit:function(e){e.container.find(".k-button.k-grid-update").hide(),e.container.find(".k-button.k-grid-cancel").text("확인");var t=this,a="",i={procedureParam:"USP_SY_14NOTICEFILES01_GET&L_CD_REF1@s",L_CD_REF1:e.model.NO_NOTICE};r.getList(i).then(function(e){t.currentFileList=e.data.results[0],angular.forEach(t.currentFileList,function(e){a+="<a href='"+l.gridNoticeVO.url+"?NO_AT="+e.NO_AT+"&CD_AT="+e.CD_AT+"' download="+e.NM_FILE+"> "+e.NM_FILE+" </a></br>"}),$("#fileInfo").append(a)})},resizable:!0,rowTemplate:kendo.template($.trim($("#ma_notice_template").html())),height:215},e.$on("kendoWidgetCreated",function(e,t){t.textarea&&$(t.body).attr("contenteditable",!1)}),l.find()}])}(),function(){"use strict";angular.module("sy.Dashboard.controller").controller("sy.SaCntCtrl",["$scope","sy.DashboardSvc","$timeout","UtilSvc",function(e,t,a,r){e.$on("dashboard:query",function(e,r){t.setPayload(d,r),a(function(){d.find()})});var i=edt.getToday(),n={startYear:i.y,startMonth:i.m,endYear:i.y,endMonth:i.m},s={"class":"table-header-cell",style:"text-align: center; font-size: 12px"},l={autoBind:!1,transport:{read:function(e){}},schema:{model:{fields:{CD_DEF:{type:"string"},NM_DEF:{type:"string"},CNT:{type:"number"}}}}},o={transport:{read:function(e){}}},d=e.saCnt={tabName:"",code:{},table:{},chart:{},find:function(){var e=this,t="CHART"===e.tabName,a=t?d.chart:d.table,i={procedureParam:"USP_SY_01DASHBOARD02_GET&DTS_JOINREQSTRT@s|DTS_JOINREQEND@s",DTS_JOINREQSTRT:a.search.period.startYear+a.search.period.startMonth+"01000000",DTS_JOINREQEND:a.search.period.endYear+a.search.period.endMonth+"32000000"};r.getList(i).then(function(e){e.data.results.forEach(function(e){e.forEach(function(e){e.CNT=Number(e.CNT)})}),t?(a.dataOrd.data(e.data.results[0]),a.dataCcl.data(e.data.results[1]),a.dataTkbk.data(e.data.results[2]),a.dataEchg.data(e.data.results[3])):(a.optionsOrd.dataSource.data(e.data.results[0]),a.optionsCcl.dataSource.data(e.data.results[1]),a.optionsTkbk.dataSource.data(e.data.results[2]),a.optionsEchg.dataSource.data(e.data.results[3]))})}};d.table={search:{period:angular.extend({type:"year"},angular.copy(n))},data:{}},d.table.optionsOrd={messages:{noRows:"정보가 존재하지 않습니다.",loading:"정보를 가져오는 중...",requestFailed:"정보를 가져오는 중 오류가 발생하였습니다.",retry:"갱신"},dataSource:new kendo.data.DataSource(l),columns:[{field:"NM_DEF",width:100,title:"주문상태",headerAttributes:s,template:'<div style="text-align:center;">#=NM_DEF#</div>'},{field:"CNT",width:100,title:"건수",headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(CNT,"n0")#</div>'}],scrollable:!1},d.table.optionsCcl=angular.copy(d.table.optionsOrd),d.table.optionsCcl.dataSource=new kendo.data.DataSource(l),d.table.optionsCcl.columns[0].title="취소상태",d.table.optionsTkbk=angular.copy(d.table.optionsOrd),d.table.optionsTkbk.dataSource=new kendo.data.DataSource(l),d.table.optionsTkbk.columns[0].title="반품상태",d.table.optionsEchg=angular.copy(d.table.optionsOrd),d.table.optionsEchg.dataSource=new kendo.data.DataSource(l),d.table.optionsEchg.columns[0].title="교환상태",d.chart={search:{period:angular.extend({type:"year"},angular.copy(n))},data:{}},d.chart.options={legend:{visible:!1},seriesDefaults:{labels:{position:"center",visible:!0,background:"transparent",rotation:-310,template:"#= category # #= value #건"}},seriesColors:["#03a9f4","#ff9800","#fad84a","#ffb2d9","#f15f5f"],tooltip:{visible:!0,template:"${ category } ${ value }건"},chartArea:{margin:{top:20,left:0,right:0,bottom:0}},plotArea:{margin:20}},d.chart.dataOrd=new kendo.data.DataSource(o),d.chart.dataCcl=new kendo.data.DataSource(o),d.chart.dataTkbk=new kendo.data.DataSource(o),d.chart.dataEchg=new kendo.data.DataSource(o)}])}(),function(){"use strict";angular.module("sy.Dashboard.controller").controller("sy.MrkSaCntCtrl",["$scope","sy.DashboardSvc","$timeout","UtilSvc",function(e,t,a,r){e.$on("dashboard:query",function(e,r){t.setPayload(l,r),a(function(){l.find()})});var i=edt.getToday(),n={startYear:i.y,startMonth:i.m,endYear:i.y,endMonth:i.m},s={"class":"table-header-cell",style:"text-align: center; font-size: 12px"},l=e.mrkSaCnt={tabName:"",code:{},table:{},chart:{},find:function(){var e=this,t="CHART"===e.tabName,a=t?l.chart:l.table,i={procedureParam:"USP_SY_01DASHBOARD03_GET"};r.getList(i).then(function(e){e.data.results[0].forEach(function(e){e.QT_NEWORD=Number(e.QT_NEWORD),e.QT_CCL=Number(e.QT_CCL),e.QT_TKBK=Number(e.QT_TKBK),e.QT_ECHG=Number(e.QT_ECHG),e.QT_INQ=Number(e.QT_INQ),e.QT_ITEMINQ=Number(e.QT_ITEMINQ),e.QT_SHPRDY=Number(e.QT_SHPRDY),e.QT_SHPING=Number(e.QT_SHPING),e.QT_SHPCPLT=Number(e.QT_SHPCPLT),e.QT_REGITEM=Number(e.QT_REGITEM)}),a.options.dataSource.data(e.data.results[0])})}};l.table={search:{period:angular.extend({type:"year"},angular.copy(n))},data:{}},l.table.options={messages:{noRows:"정보가 존재하지 않습니다.",loading:"정보를 가져오는 중...",requestFailed:"정보를 가져오는 중 오류가 발생하였습니다.",retry:"갱신"},dataSource:new kendo.data.DataSource({autoBind:!1,transport:{read:function(e){}},schema:{model:{fields:{NO_MRK:{type:"string"},NM_MRK:{type:"string"},QT_NEWORD:{type:"number"},QT_CCL:{type:"number"},QT_TKBK:{type:"number"},QT_ECHG:{type:"number"},QT_INQ:{type:"number"},QT_ITEMINQ:{type:"number"},QT_SHPRDY:{type:"number"},QT_SHPING:{type:"number"},QT_SHPCPLT:{type:"number"},QT_REGITEM:{type:"number"}}}}}),columns:[{field:"NM_MRK",width:100,headerAttributes:s,template:'<div style="text-align:center;">#=NM_MRK#</div>',title:"마켓명"},{field:"QT_NEWORD",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_NEWORD ,"n0")#</div>',title:"신규주문"},{field:"QT_CCL",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_CCL    ,"n0")#</div>',title:"취소"},{field:"QT_TKBK",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_TKBK   ,"n0")#</div>',title:"반품"},{field:"QT_ECHG",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_ECHG   ,"n0")#</div>',title:"교환"},{field:"QT_INQ",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_INQ    ,"n0")#</div>',title:"문의"},{field:"QT_ITEMINQ",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_ITEMINQ,"n0")#</div>',title:"아이템문의"},{field:"QT_SHPRDY",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_SHPRDY ,"n0")#</div>',title:"배송준비"},{field:"QT_SHPING",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_SHPING ,"n0")#</div>',title:"배송중"},{field:"QT_SHPCPLT",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_SHPCPLT,"n0")#</div>',title:"배송완료"},{field:"QT_REGITEM",width:100,headerAttributes:s,template:'<div style="text-align:right; margin-right:5px;">#=kendo.toString(QT_REGITEM,"n0")#</div>',title:"등록상품"}],scrollable:!1},l.chart={data:{}},l.chart.options={legend:{visible:!0,position:"bottom"},series:[{field:"QT_NEWORD",name:"신규주문"},{field:"QT_CCL",name:"취소"},{field:"QT_TKBK",name:"반품"},{field:"QT_ECHG",name:"교환"},{field:"QT_INQ",name:"문의"},{field:"QT_ITEMINQ",name:"아이템문의"},{field:"QT_SHPRDY",name:"배송준비"},{field:"QT_SHPING",name:"배송중"},{field:"QT_SHPCPLT",name:"배송완료"},{field:"QT_REGITEM",name:"등록상품"}],categoryAxis:{field:"NM_MRK",majorGridLines:{visible:!1}},valueAxis:[{labels:{format:""},majorUnit:5,line:{visible:!1},title:{text:"건수"}}],seriesColors:["#9ddffb","#ffcf88","#fdea9f","#03a9f4","#ff9800","#fad84a","#7575ff","#ffb2d9","#f15f5f","#a6a6a6"],tooltip:{visible:!0,template:"${ series.name } ${ value }건"},chartArea:{height:300}},l.chart.options.dataSource=new kendo.data.DataSource({transport:{read:function(e){}}})}])}(),function(){"use strict";angular.module("sy.Dashboard.controller").controller("sy.SaMonthCtrl",["$scope","sy.DashboardSvc","$timeout","UtilSvc",function(e,t,a,r){e.$on("dashboard:query",function(e,r){t.setPayload(d,r),a(function(){d.find()})});var i=edt.getToday(),n={startYear:i.y,startMonth:i.m,endYear:i.y,endMonth:i.m},s={"class":"table-cell",style:"text-align: center; font-size: 12px"},l={"class":"table-cell",style:"text-align: right; font-size: 12px"},o={"class":"table-header-cell",style:"text-align: center; font-size: 12px"},d=e.saMonth={tabName:"",code:{},table:{},chart:{},find:function(){var e=this,t="CHART"===e.tabName,a=t?d.chart:d.table,i={procedureParam:"USP_SY_01DASHBOARD04_GET&DTS_JOINREQSTRT@s|DTS_JOINREQEND@s",DTS_JOINREQSTRT:a.search.period.startYear+a.search.period.startMonth+"01000000",DTS_JOINREQEND:a.search.period.endYear+a.search.period.endMonth+"32000000"};r.getList(i).then(function(e){var t=0,r=0,i=0,n=0;e.data.results[0].forEach(function(e){t+=e.T1_CNT,r+=e.T2_CNT,i+=e.T3_CNT,n+=e.T4_CNT,e.SUM_T1_CNT=t,e.SUM_T2_CNT=r,e.SUM_T3_CNT=i,e.SUM_T4_CNT=n}),a.dataSource.data(e.data.results[0])})}};d.table={search:{period:angular.extend({type:"year"},angular.copy(n))},data:{},messages:{noRows:"정보가 존재하지 않습니다.",loading:"정보를 가져오는 중...",requestFailed:"정보를 가져오는 중 오류가 발생하였습니다.",retry:"갱신"},dataSource:new kendo.data.DataSource({autoBind:!1,transport:{read:function(e){}},schema:{model:{id:"ROW_NUM",fields:{YYMM:{type:"string"},T1_CNT:{type:"number"},T2_CNT:{type:"number"},T3_CNT:{type:"number"},T4_CNT:{type:"number"}}}},sort:{field:"YYMM",dir:"asc"}}),columns:[{field:"YYMM",width:100,attributes:s,title:"년/월",headerAttributes:o},{field:"T1_CNT",width:100,attributes:l,title:"주문완료",headerAttributes:o},{field:"T2_CNT",width:100,attributes:l,title:"취소완료",headerAttributes:o},{field:"T3_CNT",width:100,attributes:l,title:"반품완료",headerAttributes:o},{field:"T4_CNT",width:100,attributes:l,title:"교환완료",headerAttributes:o},{field:"detail",title:" "}],sortable:{mode:"single",allowUnsort:!1,showIndexes:!0}},d.chart={search:{selected:"000",period:angular.extend({type:"year"},angular.copy(n))},dataSource:new kendo.data.DataSource({transport:{read:function(e){}}})},d.chart.options={legend:{visible:!0,position:"bottom"},series:[{field:"T1_CNT",name:"주문완료"},{field:"T2_CNT",name:"취소완료"},{field:"T3_CNT",name:"반품완료"},{field:"T4_CNT",name:"교환완료"},{type:"line",field:"SUM_T1_CNT",name:"주문완료누적",axis:"line"},{type:"line",field:"SUM_T2_CNT",name:"취소완료누적",axis:"line"},{type:"line",field:"SUM_T3_CNT",name:"반품완료누적",axis:"line"},{type:"line",field:"SUM_T4_CNT",name:"교환완료누적",axis:"line"}],categoryAxis:{field:"YYMM",majorGridLines:{visible:!1},axisCrossingValue:[0,12]},valueAxis:[{labels:{format:""},majorUnit:10,line:{visible:!1},title:{text:"월단위"}},{name:"line",min:0,magjorUnit:5,title:{text:"누적단위"}}],seriesColors:["#9ddffb","#ffcf88","#fdea9f","#03a9f4","#ff9800","#fad84a","#7575ff","#ffb2d9"],tooltip:{visible:!0,template:"${ series.name } ${ value }건"},chartArea:{height:300}}}])}(),function(){"use strict";angular.module("sy.Dashboard.controller").controller("sy.DashQaCtrl",["$scope","sy.DashboardSvc","$timeout","UtilSvc","APP_CONFIG",function(e,t,a,r,i){e.$on("dashboard:query",function(e,r){t.setPayload(s,r),a(function(){s.find()})});var n=(edt.getToday(),{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}),s=e.qa={tabName:"",code:{},find:function(){s.gridQaVO.dataSource.read()}};$("#divQaGrd").delegate("tbody>tr","dblclick",function(){$("#divQaGrd").data("kendoGrid");$("#divQaGrd").data("kendoGrid").editRow($(this))}),r.gridtooltipOptions.filter="td",s.tooltipOptions=r.gridtooltipOptions,s.gridQaVO={autoBind:!1,messages:{requestFailed:"묻고답하기 정보를 가져오는 중 오류가 발생하였습니다.",noRecords:"검색된 데이터가 없습니다."},boxTitle:"묻고답하기 리스트",url:i.domain+"/ut05FileUpload",sortable:!0,pageable:{messages:r.gridPageableMessages},noRecords:!0,inqFileList:[],ansFileList:[],dataSource:new kendo.data.DataSource({transport:{read:function(e){var t={procedureParam:"USP_SY_01DASHBOARD05_GET"};r.getList(t).then(function(t){e.success(t.data.results[0])})}},pageSize:3,batch:!0,schema:{model:{id:"NO_QA",fields:{ROW_NUM:{type:"string"},NO_QA:{type:"string"},NO_C:{type:"string"},DTS_INQREG:{type:"string"},CD_BCL:{type:"string"},NM_BCL:{type:"string"},CD_MCL:{type:"string"},NM_MCL:{type:"string"},CD_SCL:{type:"string"},NM_SCL:{type:"string"},DC_INQTITLE:{type:"string"},DC_HTMLINQCTT:{type:"string"},DC_INQCTT:{type:"string"},NO_INQPHNE:{type:"string"},DC_INQEMI:{type:"string"},NO_INQCEPH:{type:"string"},NM_ANS:{type:"string"},DC_HTMLANSCTT:{type:"string"},DC_ANSCTT:{type:"string"},DTS_ANSREG:{type:"string"},CD_ANSSTAT:{type:"string"},NM_ANSSTAT:{type:"string"},DTS_ANSCFM:{type:"string"},NO_INSERT:{type:"string"},NM_INSERT:{type:"string"},CNT_FILE:{type:"string"},M_CNT_FILE:{type:"string"}}}}}),selectable:"row",columns:[{field:"DTS_INQREG",title:"문의등록일시",width:150,headerAttributes:n},{field:"NM_INSERT",title:"문의자",width:100,headerAttributes:n},{field:"DC_INQTITLE",title:"문의제목",width:250,headerAttributes:n},{field:"DC_INQCTT",title:"문의내용",headerAttributes:n},{field:"DC_ANSCTT",title:"답변내용",headerAttributes:n},{field:"NM_ANSSTAT",title:"답변처리상태",width:100,headerAttributes:n}],editable:{mode:"popup",window:{title:"묻고답하기"},template:kendo.template($.trim($("#sy_qa_popup_template").html()))},edit:function(e){e.container.find(".k-button.k-grid-update").hide(),e.container.find(".k-button.k-grid-cancel").text("확인");var t=this,a="",i="",n={procedureParam:"USP_SY_01DASHBOARD06_GET&L_CD_REF1@s",L_CD_REF1:e.model.NO_QA};r.getList(n).then(function(e){t.inqFileList=e.data.results[0],t.ansFileList=e.data.results[1],angular.forEach(t.inqFileList,function(e){a+="<a href='"+s.gridQaVO.url+"?NO_AT="+e.NO_AT+"&CD_AT="+e.CD_AT+"' download="+e.NM_FILE+"> "+e.NM_FILE+" </a></br>"}),angular.forEach(t.ansFileList,function(e){i+="<a href='"+s.gridQaVO.url+"?NO_AT="+e.NO_AT+"&CD_AT="+e.CD_AT+"' download="+e.NM_FILE+"> "+e.NM_FILE+" </a></br>"}),$("#inqFileInfo").append(a),$("#ansFileInfo").append(i)})},resizable:!0,rowTemplate:kendo.template($.trim($("#sy_qa_template").html())),height:150},e.$on("kendoWidgetCreated",function(e,t){t.textarea&&$(t.body).attr("contenteditable",!1)}),s.find()}])}(),function(){"use strict";angular.module("sy.Dashboard.service").factory("sy.DashboardSvc",["APP_CONFIG","$http",function(e,t){return{setPayload:function(e,t){t=t||{};var a;for(a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}}}])}(),function(){"use strict";var e=angular.module("sy.Login",["sy.Login.controller","sy.Login.service"]);angular.module("sy.Login.controller",[]),angular.module("sy.Login.service",[]),e.config(["$stateProvider",function(e){e.state("login",{url:"/99sy/syLogin",templateUrl:"app/contents/99sy/sy02Login/templates/sy.Login.tpl.html",controller:"sy.LoginCtrl",resolve:{isLogin:["sy.LoginSvc","$state","$rootScope","$q",function(e,t,a,r){var i=r.defer();return e.isLogin().then(function(e){401!==e.status?(t.go("app.syDashboard",{menu:!0}),i.resolve()):(i.resolve(),a.$emit("event:logout"))}),i.promise}]}})}])}(),function(){"use strict";angular.module("sy.Login.controller").controller("sy.LoginCtrl",["$rootScope","$scope","$modal","$state","sy.LoginSvc","APP_CONFIG","$window","$http","MenuSvc","$timeout",function(e,t,a,r,i,n,s,l,o,d){var c;c=t.loginVO={isRegisterId:!1,info:{bsCd:n.bsCd,user:"",password:""},version:n.version,url:""},c.initLoad=function(){var e=this,t=s.localStorage.getItem("recentLoginInfo"),a=s.localStorage.getItem("recentLoginBsCd");a&&(a=JSON.parse(a),e.info.bsCd=a.bsCd),t&&(t=JSON.parse(t),e.info.user=t.user,e.isRegisterId=!0),d(function(){t?edt.id("passWord").focus():edt.id("bsCdId").focus()},500)},c.doLogin=function(){var t=this,a=t.info;e.$broadcast("event:autoLoader",!1),i.login(a).then(function(i){s.localStorage.setItem("recentLoginBsCd",JSON.stringify({bsCd:a.bsCd})),t.isRegisterId?s.localStorage.setItem("recentLoginInfo",JSON.stringify({user:a.user})):s.localStorage.removeItem("recentLoginInfo"),i.data.NO_C=a.bsCd,e.$emit("event:setUser",i.data),e.$emit("event:setMenu",o.setMenu(i.data.MENU_LIST).getMenu()),e.$emit("event:autoLoader",!0),r.go(o.getDefaultUrl(),{menu:!0,ids:null})})},c.modalRePassword=function(){var e=a.open({options:{modal:!0,resizable:!0,width:450,visible:!1},templateUrl:"app/shared/modal/mo03RePwd/modal.mo03RePwd.tpl.html",controller:"modal.mo03RePwdCtrl",size:"sm"});e.result.then(function(e){})},c.modalUserJoin=function(){var e=a.open({options:{modal:!0,resizable:!0,width:450,height:800,visible:!1},templateUrl:"app/shared/modal/mo02UserJoin/modal.mo02UserJoin.tpl.html",controller:"modal.mo02UserJoinCtrl",size:"lg"});e.result.then(function(e){})},c.initLoad()}])}(),function(){"use strict";angular.module("sy.Login.service").factory("sy.LoginSvc",["APP_CONFIG","$http",function(e,t){return{login:function(a){return t({method:"POST",url:e.domain+"/login",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param(this.makeLoginParam(a))})},logout:function(){return t({method:"POST",url:e.domain+"/logout",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8",NO_M:""}})},isLogin:function(){return t.get(e.domain+"/logincheck")},getLoginedInfo:function(){return t.get(e.domain+"/loginInfo")},makeLoginParam:function(e){return{NO_C:e.bsCd,user:e.user,password:e.password}},setupRePwd:function(a){return t({method:"POST",url:e.domain+"/setupRePwd",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({DC_EMIADDR:a})})},doChkMe:function(a){return t({method:"POST",url:e.domain+"/chkMe",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({DC_EMIADDR:a})})},updateChkMeConf:function(a){return t({method:"GET",url:e.domain+"/chkMeConf?NO_OWNCONF="+a,headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"}})},dupCheckNmC:function(a,r){return t({method:"POST",url:e.domain+"/dupCheckNmC",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({L_NM_C:a,L_DC_EMIADDR:r})})},selectCla:function(a){return t({method:"GET",url:e.domain+"/selectCla?L_CD_CLA="+a,headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"}})},saveUserJoin:function(a){return t({method:"POST",url:e.domain+"/saveUserJoin",data:a})}}}])}(),function(){"use strict";var e=angular.module("sy.RePwdReg",["sy.RePwdReg.controller","sy.Ownconf.controller","sy.RePwdReg.service"]);angular.module("sy.RePwdReg.controller",[]),angular.module("sy.Ownconf.controller",[]),angular.module("sy.RePwdReg.service",[]),e.config(["$stateProvider",function(e){e.state("syRePwdReg",{url:"/99sy/syRePwdReg/:DC_URLCRYTO?:noOwnconf",templateUrl:function(e){var t="app/contents/99sy/sy03RePwdReg/templates/sy.RePwdReg.tpl.html";return"chkMeConf"===e.DC_URLCRYTO&&(t="app/contents/99sy/sy03RePwdReg/templates/sy.Ownconf.tpl.html"),t},controllerProvider:["$stateParams",function(e){var t="sy.RePwdRegCtrl";return"chkMeConf"===e.DC_URLCRYTO&&(t="sy.OwnconfCtrl"),t}],resolve:{resData:["sy.RePwdRegSvc","$stateParams","$state","$location","$rootScope","$q","UtilSvc","sy.LoginSvc",function(e,t,a,r,i,n,s,l){var o=n.defer(),d="",c={};return"chkMeConf"===t.DC_URLCRYTO?(d=t.noOwnconf,l.updateChkMeConf(d).success(function(e){c.data=e,o.resolve(c)}).error(function(e,t){o.resolve(),r.url("/99sy/syLogin")})):e.rePwdGet01(t.DC_URLCRYTO).success(function(e){c.DC_URLCRYTO=t.DC_URLCRYTO,o.resolve(c)}).error(function(e,t){o.resolve(),r.url("/99sy/syLogin")}),o.promise}]}})}])}(),function(){"use strict";angular.module("sy.RePwdReg.controller").controller("sy.RePwdRegCtrl",["$rootScope","$scope","$http","$q","$log","sy.RePwdRegSvc","APP_CODE","$timeout","resData","Page","APP_CONFIG","$location",function(e,t,a,r,i,n,s,l,o,d,c,u){var _;_=t.rePwdRegVo={imagePath:c.domain+"/captcha",password:"",repassword:"",captcha:""},_.initLoad=function(){l(function(){edt.id("userPw").focus()},500)},_.doRefresh=function(){var e=this;e.imagePath=e.imagePath+"?id="+Math.random()},_.doRePwd=function(){var e=this;return e.password?/^[a-zA-Z0-9~`|!@#$%^&*()[\]\-=+_|{};':\\\"<>?,.\/]{5,14}$/.test(e.password)?e.repassword!==e.password?edt.invalidFocus("userChkPw","[MATCH] 비밀번호가 일치하지 않습니다."):e.captcha?void n.rePwd(o.DC_URLCRYTO,e.password,e.captcha).then(function(e){alert("변경완료하였습니다."),u.url("/99sy/syLogin")}):edt.invalidFocus("captchaId","[필수] 보안문자를 입력해주세요."):edt.invalidFocus("userPw","[형식] 패스워드는 유효하지 않은 형식입니다. 5~14자리 이하입니다."):edt.invalidFocus("userPw","[필수] 패스워드를 입력해주세요.")},_.doLogin=function(){u.url("/99sy/syLogin")},_.initLoad()}])}(),function(){"use strict";angular.module("sy.Ownconf.controller").controller("sy.OwnconfCtrl",["$rootScope","$scope","resData","$location",function(e,t,a,r){var i;i=t.ownconfVO={message:a.data},i.doLogin=function(){r.url("/99sy/syLogin")}}])}(),function(){"use strict";angular.module("sy.RePwdReg.service").factory("sy.RePwdRegSvc",["APP_CONFIG","$http",function(e,t){return{rePwdGet01:function(a){return t({method:"POST",url:e.domain+"/RePwdReg01",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({L_DC_URLCRYTO:a})})},rePwd:function(a,r,i){return t({method:"POST",url:e.domain+"/RePwd",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({DC_URLCRYTO:a,DC_PWD:r,DC_CAPTCHA:i})})}}}])}(),function(){"use strict";var e=angular.module("sy.UserJoin",["sy.UserJoin.controller","sy.UserJoin.service"]);angular.module("sy.UserJoin.controller",[]),angular.module("sy.UserJoin.service",[]),e.config(["$stateProvider",function(e){e.state("syUserJoin",{url:"/99sy/syUserJoin",templateUrl:"app/contents/99sy/sy04UserJoin/templates/sy.UserJoin.tpl.html",controller:"sy.UserJoinCtrl",resolve:{isLogin:["sy.LoginSvc","$state","$rootScope","$q",function(e,t,a,r){var i=r.defer();return i.resolve(),i.promise}]}})}])}(),function(){"use strict";angular.module("sy.UserJoin.controller").controller("sy.UserJoinCtrl",["$scope","$modal","ngTableParams","sy.LoginSvc","$sce","$filter","UtilSvc","$timeout",function(e,t,a,r,i,n,s,l){var o=e.userJoinVO={param:{NM_C:"",CD_BSNSCLFT:"001",NO_BSNSRGTT:"",YN_COMMSALEREG:"Y",NO_COMMSALEREG:"",DC_ID:"",DC_EMIADDR:"",DC_PWD:"",DC_REPWD:"",NO_OWNCONF:""},ynChkDup:!1,ynCla:!1};o.isChangeNmC=function(){var e=this;e.ynChkDup=!1},o.dupCheck=function(){var e=this;return""===e.param.NM_C?(alert("사업자명을 입력하여 주세요."),void l(function(){edt.id("joinNmC").focus()},500)):""===e.param.DC_EMIADDR?(alert("이메일을 입력하여 주세요."),void l(function(){edt.id("joinEmiAddr").focus()},500)):void r.dupCheckNmC(e.param.NM_C,e.param.DC_EMIADDR).then(function(t){e.ynChkDup=!1,200===t.status&&("null"===t.data||""===t.data[0].CD_JOINYN&&""===t.data[1].CD_JOINYN?(e.ynChkDup=!0,alert("중복된 사업자명과 이메일이 없습니다.")):"001"==t.data[0].CD_JOINYN?alert("사업자명["+e.param.NM_C+"]은 "+s.dateFormat(t.data[0].DTS_JOINREQ)+"에 가입요청 중 입니다."):"002"==t.data[0].CD_JOINYN?alert("사업자명["+e.param.NM_C+"]은 미가입상태입니다. 관리자에게 문의바랍니다."):"003"==t.data[0].CD_JOINYN?alert("사업자명["+e.param.NM_C+"]은 "+s.dateFormat(t.data[0].DTS_JOIN)+"에 가입 중 입니다."):"001"==t.data[1].CD_JOINYN?alert("이메일["+e.param.DC_EMIADDR+"]은 "+s.dateFormat(t.data[1].DTS_JOINREQ)+"에 가입요청 중 입니다."):"002"==t.data[1].CD_JOINYN?alert("이메일["+e.param.DC_EMIADDR+"]은 미가입상태입니다. 관리자에게 문의바랍니다."):"003"==t.data[1].CD_JOINYN?alert("이메일["+e.param.DC_EMIADDR+"]은 "+s.dateFormat(t.data[1].DTS_JOIN)+"에 가입 중 입니다."):alert("관리자에게 문의바랍니다."))})},o.doChkMe=function(){var e=this;return/^[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[@]{1}[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[.]{1}[A-Za-z]{2,5}$/.test(e.param.DC_EMIADDR)?void r.doChkMe(e.param.DC_EMIADDR).then(function(t){200===t.status&&(alert("본인확인 이메일을 발송하였습니다. 이메일 확인을 하여 주시기 바랍니다."),e.param.NO_OWNCONF=t.data.NO_OWNCONF)}):edt.invalidFocus("joinEmiAddr","[형식] 이메일은 유효하지 않은 형식입니다.")},o.isValid=function(){var e=this,t=o.param;return t.NM_C?/^[가-힣a-zA-Z0-9~*()[\]\-<> ][가-힣a-zA-Z0-9~*()[\]\-<> ]{1,50}$/.test(t.NM_C)?e.ynChkDup?t.DC_ID?/^[a-zA-Z0-9]{3,15}$/.test(t.DC_ID)?t.DC_PWD?/^[a-zA-Z0-9~`|!@#$%^&*()[\]\-=+_|{};':\\\"<>?,.\/]{8,15}$/.test(t.DC_PWD)?t.DC_REPWD!==t.DC_PWD?edt.invalidFocus("joinChkPwd","[MATCH] 비밀번호가 일치하지 않습니다."):t.DC_EMIADDR&&!/^[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[@]{1}[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[.]{1}[A-Za-z]{2,5}$/.test(t.DC_EMIADDR)?edt.invalidFocus("joinEmiAddr","[형식] 이메일은 유효하지 않은 형식입니다."):!!o.checkBizNo(t.NO_BSNSRGTT)||edt.invalidFocus("joinNoBsnsClft","[형식] 사업자번호를 확인하여 주십시오."):edt.invalidFocus("joinPwd","[형식] 패스워드는 유효하지 않은 형식입니다. 8~15자리 이하입니다."):edt.invalidFocus("joinPwd","[필수] 패스워드를 입력해주세요."):edt.invalidFocus("joinDcId","[형식] ID는 유효하지 않은 형식입니다. 영문(대소문자 구분 안함), 숫자만 가능합니다."):edt.invalidFocus("joinDcId","[필수] ID를 입력해주세요."):edt.invalidFocus("btnDupCheck","중복체크를 하지 않았습니다."):edt.invalidFocus("joinNmC","[형식] 사업자명은 유효하지 않은 형식입니다. 영문, 한글, 공백만 사용 가능합니다."):edt.invalidFocus("joinNmC","[필수] 사업자명을 입력해주세요.")},o.checkBizNo=function(e){var t,a,r,i=new Array(1,3,7,1,3,7,1,3,5,1),n=0;for(e=e.replace(/-/gi,""),t=0;t<=7;t++)n+=i[t]*e.charAt(t);
return a="0"+i[8]*e.charAt(8),a=a.substring(a.length-2,a.length),n+=Math.floor(a.charAt(0))+Math.floor(a.charAt(1)),r=(10-n%10)%10,Math.floor(e.charAt(9))==r},o.popCla=function(){var e=t.open({options:{modal:!0,resizable:!0,width:470,visible:!1},templateUrl:"app/shared/modal/mo01Cla/modal.mo01Cla.tpl.html",controller:"modal.mo01ClaCtrl",size:"lg",resolve:{resData:["$stateParams","$q","AuthSvc","sy.AtrtSvc",function(e,t,a){var i=t.defer(),n={};return r.selectCla("001").then(function(e){200===e.status&&(n.DC_CLA001=e.data,r.selectCla("002").then(function(e){200===e.status&&(n.DC_CLA002=e.data,r.selectCla("003").then(function(e){200===e.status&&(n.DC_CLA003=e.data,i.resolve(n))}))}))}),i.promise}]}});e.result.then(function(e){})},o.doUserJoin=function(){var e=this;return e.ynCla?void(o.isValid()&&r.doChkMe(e.param.DC_EMIADDR).then(function(t){200===t.status&&(e.param.NO_OWNCONF=t.data.NO_OWNCONF,r.saveUserJoin(e.param).then(function(e){200===e.status&&(alert("회원 가입하였습니다."),window.close())}))})):(alert("약관에 동의를 하지 않았습니다."),void edt.id("joinNmC").focus())},o.doClose=function(){window.close()},function(){l(function(){edt.id("joinNmC").focus()},500)}()}])}(),function(){"use strict";angular.module("sy.UserJoin.service").factory("sy.UserJoinSvc",["APP_CONFIG","$http",function(e,t){return{login:function(a){return t({method:"POST",url:e.domain+"/login",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param(this.makeLoginParam(a))})},logout:function(){return t({method:"POST",url:e.domain+"/logout",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8",NO_M:""}})},isLogin:function(){return t.get(e.domain+"/logincheck")},getLoginedInfo:function(){return t.get(e.domain+"/loginInfo")},makeLoginParam:function(e){return{NO_C:e.bsCd,user:e.user,password:e.password}},setupRePwd:function(a){return t({method:"POST",url:e.domain+"/setupRePwd",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({DC_EMIADDR:a})})},doChkMe:function(a){return t({method:"POST",url:e.domain+"/chkMe",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({DC_EMIADDR:a})})},updateChkMeConf:function(a){return t({method:"GET",url:e.domain+"/chkMeConf?NO_OWNCONF="+a,headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"}})},dupCheckNmC:function(a,r){return t({method:"POST",url:e.domain+"/dupCheckNmC",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param({L_NM_C:a,L_DC_EMIADDR:r})})},selectCla:function(a){return t({method:"GET",url:e.domain+"/selectCla?L_CD_CLA="+a,headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"}})},saveUserJoin:function(a){return t({method:"POST",url:e.domain+"/saveUserJoin",data:a})}}}])}(),function(){"use strict";var e=angular.module("sy.MyInfo",["sy.MyInfo.controller","sy.MyInfo.service"]);angular.module("sy.MyInfo.controller",[]),angular.module("sy.MyInfo.service",[]),e.config(["$stateProvider",function(e){e.state("app.syMyInfo",{url:"/99sy/syMyInfo?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy05MyInfo/templates/sy.MyInfo.tpl.html",controller:"sy.MyInfoCtrl",resolve:{resData:["sy.LoginSvc","$q","$rootScope","UtilSvc",function(e,t,a,r){var i=t.defer(),n={},s={procedureParam:"USP_SY_05MyInfo_GET"};return e.isLogin().then(function(){a.$emit("event:login"),t.all([r.getList(s).then(function(e){return e.data.results})]).then(function(e){n.MyParam=e[0][0][0],n.fileProfile=e[0][1][0],i.resolve(n)})}),i.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.MyInfo.controller").controller("sy.MyInfoCtrl",["$rootScope","$scope","$q","sy.MyInfoSvc","sy.LoginSvc","UtilSvc","Page","resData",function(e,t,a,r,i,n,s,l){var o=t.myInfoVO={param:{NO_EMP:"",currentPw:"",newPw:"",newPwChk:"",isEquals:!1,message:"비밀번호를 입력해주세요.",DC_ID:"",NM_EMP:"",DC_EMIADDR:"",NM_DEPT:"",NM_RANK:"",DT_EMP:"",YN_SMS:"",YN_EMI:"",yn_change:!1},fileProfileVO:{CD_AT:"001",limitCnt:1,bImage:!0,imgWidth:"200px",imgHeight:"250px",currentData:{CD_AT:"",CD_REF1:"",CD_REF2:"",CD_REF3:null,CD_REF4:null,CD_REF5:"",DTS_INSERT:null,DTS_UPDATE:null,NM_FILE:"",NM_FILEPATH:"",NO_AT:0,NO_C:"",NO_INSERT:"",NO_UPDATE:null,SZ_FILE:"",YN_DEL:null}}};o.tab=function(e){var t=!1,a="변경사항이 있습니다.\n변경하시겠습니까?";if(e.fileProfileVO.dirty?confirm(a)?(t=!0,o.doFileChange()):e.fileProfileVO.fileInit():e.param.isEquals?confirm(a)?o.doUpdatePw():(e.param.currentPw="",e.param.newPw="",e.param.newPwChk="",e.param.isEquals=!1,e.param.message="비밀번호를 입력해주세요."):e.param.yn_change&&(t=!0,confirm(a)&&o.doUpdateYn()),t){var r={procedureParam:"USP_SY_05MyInfo_GET"};n.getList(r).then(function(t){o.param=t.data.results[0][0],o.fileProfileVO.currentData=t.data.results[1][0],e.param.newPw=""})}},o.changeMessage=function(){r.changeMessage(o)},o.doFileChange=function(){o.fileProfileVO.dirty?(o.fileProfileVO.CD_REF1=o.param.NO_EMP,o.fileProfileVO.doUpload(function(){alert("성공하였습니다.")},function(){alert("파일업로드 실패하였습니다.")})):alert("성공하였습니다.")},o.doUpdatePw=function(){var e=r.makePwParam(o),a="비밀번호를 변경하시겠습니까?";return o.param.isEquals?void(confirm(a)&&r.updatePassword(e).then(function(){alert("패스워드가 변경되었습니다. 다시 로그인해주세요."),i.logout().then(function(){t.$emit("event:logout")})})):void alert("비밀번호를 확인해주세요.")},o.doUpdateYn=function(){var e=r.makeYnParam(o),t="알림을 변경하시겠습니까?";confirm(t)&&r.updateYn(e).then(function(){})},o.getUserInfo=function(){o.param=l.MyParam,o.fileProfileVO.currentData=l.fileProfile,o.param.newPw=""},o.getUserInfo()}])}(),function(){"use strict";angular.module("sy.MyInfo.service").factory("sy.MyInfoSvc",["APP_CONFIG","$http",function(e,t){return{updatePassword:function(a){return t({method:"PUT",url:e.domain+"/sy05MyInfo/pwd",data:a})},updateYn:function(a){return t({method:"PUT",url:e.domain+"/sy05MyInfo/yn",data:a})},makePwParam:function(e){var t=e.param;return{OLD_DC_PWD:t.currentPw,DC_PWD:t.newPw}},makeYnParam:function(e){var t=e.param;return{YN_SMS:t.YN_SMS,YN_EMI:t.YN_EMI}},changeMessage:function(e){var t=e.param;t.isEquals=!1,""===t.currentPw?t.message="비밀번호를 입력해주세요.":""===t.newPw||t.newPw.length<6||"undefined"===t.newPw?t.message="비밀번호는 6자리이상 15자리 이하입니다.":t.newPw===t.newPwChk?(t.message="비밀번호가 수정 가능합니다.",t.isEquals=!0):t.message="새비밀번호가 일치하지 않습니다."}}}])}(),function(){"use strict";var e=angular.module("sy.CInfo",["sy.CInfo.controller","sy.CInfo.service"]);angular.module("sy.CInfo.controller",[]),angular.module("sy.CInfo.service",[]),e.config(["$stateProvider",function(e){e.state("app.syCInfo",{url:"/99sy/syCInfo?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy06CInfo/templates/sy.CInfo.tpl.html",controller:"sy.CInfoCtrl",resolve:{resData:["AuthSvc","$q","UtilSvc",function(e,t,a){var r=t.defer(),i={},n={procedureParam:"USP_SY_06CInfoFile01_GET&L_NO_BSNS@s|L_NO_COMM@s",L_NO_BSNS:"002",L_NO_COMM:"003"};return e.isAccess().then(function(e){i.access=e[0],t.all([a.getList(n).then(function(e){return e.data.results})]).then(function(e){i.fileBsnsVOcurrentData=e[0][0][0],i.fileCommVOcurrentData=e[0][1][0],r.resolve(i)})}),r.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.CInfo.controller").controller("sy.CInfoCtrl",["$scope","$window","$http","$q","$log","sy.CInfoSvc","APP_CODE","$timeout","resData","Page","sy.CodeSvc","UtilSvc",function(e,t,a,r,i,n,s,l,o,d,c,u){var _=e.page=new d({auth:o.access});edt.getToday();t.jusoCallBack=function(t,a,r,i,n,s,l,o,d,c,u,_,p,f,D,C,g,h,T,N,y,S,E,v,M,b){"com"==t?e.$apply(function(){m.param.NO_POST=o,m.param.DC_NEWADDR=r,m.param.DC_OLDADDR=l,m.param.DC_DETADDR=i}):e.$apply(function(){m.wParam.NO_POST=o,m.wParam.DC_NEWADDR=r,m.wParam.DC_OLDADDR=l,m.wParam.DC_DETADDR=i})};var m=e.syCinfoVO={boxTitleCom:"회사정보",boxTitleAS:"A/S정보",boxTitleWaho:"창고정보",param:{NO_C:"",NM_C:"",NM_RPSTT:"",CD_BSNSCLFT:"999",NO_BSNSRGTT:"",YN_COMMSALEREG:"N",NO_COMMSALEREG:"",NO_CORPRGTT:"",NM_BSCDT:"",NM_TYBU:"",NO_POST:"",DC_NEWADDR:"",DC_OLDADDR:"",DC_DETADDR:"",CD_DMSTFECTSHP:"001",NO_PHNE:"",NO_FAX:"",DC_HOPAURL:"",NO_ASPHNE:"",CD_AS:"",DC_REPREMI:{disabled:!1,email1:"",email2:"",selectedDomain:""}},wParam:{CD_WAHODFT:"",NM_WAHO:"",CD_PARS:"",NO_POST:"",DC_NEWADDR:"",DC_OLDADDR:"",DC_DETADDR:""},bsnCodeList:[],emiCodeList:[],dmstCodeList:[],asCodeList:[],wahoCodeList:[],parsCodeList:[],today:new Date,superiorNm:"",confirmDC_PWD:"",checkMsg:"비밀번호를 입력해주세요.(6자리이상 ~ 15자리이하)",fileBsnsVO:{CD_AT:"002",limitCnt:1,bDisabled:!_.isWriteable(),currentData:{CD_AT:"",CD_REF1:"",CD_REF2:"",CD_REF3:null,CD_REF4:null,CD_REF5:"",DTS_INSERT:null,DTS_UPDATE:null,NM_FILE:"",NO_AT:1,NO_C:"",NO_INSERT:"",NO_UPDATE:null,SZ_FILE:"",YN_DEL:null}},fileCommVO:{CD_AT:"003",limitCnt:1,bDisabled:!_.isWriteable(),currentData:{CD_AT:"",CD_REF1:"",CD_REF2:"",CD_REF3:null,CD_REF4:null,CD_REF5:"",DTS_INSERT:null,DTS_UPDATE:null,NM_FILE:"",NO_AT:0,NO_C:"",NO_INSERT:"",NO_UPDATE:null,SZ_FILE:"",YN_DEL:null}}};m.init=function(){var e={procedureParam:"USP_SY_06CInfo01_GET"};m.fileBsnsVO.currentData=o.fileBsnsVOcurrentData,m.fileCommVO.currentData=o.fileCommVOcurrentData,r.all([c.getSubcodeList({cd:"SY_000004",search:"all"}).then(function(e){return e.data}),c.getSubcodeList({cd:"SY_000024",search:"all"}).then(function(e){return e.data}),c.getSubcodeList({cd:"SA_000003",search:"all"}).then(function(e){return e.data}),c.getSubcodeList({cd:"SY_000021",search:"all"}).then(function(e){return e.data}),c.getSubcodeList({cd:"SY_000013",search:"all"}).then(function(e){return e.data}),u.getList(e).then(function(e){return e.data.results[0][0]})]).then(function(e){if(m.bsnCodeList=e[0],m.emiCodeList=e[1],m.dmstCodeList=e[2],m.asCodeList=e[3],m.wahoCodeList=e[4],m.param=e[5],m.param.DC_REPREMI){var t=m.param.DC_REPREMI.split("@");m.param.DC_REPREMI={email1:t[0],email2:t[1]}}else m.param.email={email1:"",email2:""};if(m.CommsaleChange(),!_.isWriteable()){var a=$("#grid").data("kendoGrid");a.setOptions({editable:!1}),a.hideColumn(8),$("#grid .k-grid-toolbar").hide()}})},m.makeGetParam=function(){var e={NM_C:m.param.NM_C,NM_RPSTT:m.param.NM_RPSTT,CD_BSNSCLFT:m.param.CD_BSNSCLFT,NO_BSNSRGTT:m.param.NO_BSNSRGTT,YN_COMMSALEREG:m.param.YN_COMMSALEREG,NO_COMMSALEREG:m.param.NO_COMMSALEREG,NO_CORPRGTT:m.param.NO_CORPRGTT,NM_BSCDT:m.param.NM_BSCDT,NM_TYBU:m.param.NM_TYBU,NO_POST:m.param.NO_POST,DC_NEWADDR:m.param.DC_NEWADDR,DC_OLDADDR:m.param.DC_OLDADDR,DC_DETADDR:m.param.DC_DETADDR,CD_DMSTFECTSHP:m.param.CD_DMSTFECTSHP,NO_PHNE:m.param.NO_PHNE,NO_FAX:m.param.NO_FAX,DC_HOPAURL:m.param.DC_HOPAURL,NO_ASPHNE:m.param.NO_ASPHNE,CD_AS:m.param.CD_AS,DC_REPREMI:""==!m.param.DC_REPREMI.email1||""==!m.param.DC_REPREMI.email2?m.param.DC_REPREMI.email1+"@"+m.param.DC_REPREMI.email2:null};return e},m.doSave=function(){if(confirm("저장하시겠습니까?")){var e=m.makeGetParam();m.isValid(e)&&n.saveCInfo(e).success(function(){var e=$("#grid").data("kendoGrid");e.dataSource.sync(),m.fileSave(),alert("저장되었습니다."),m.reload()})}},m.goPopup=function(e){t.open("/app/shared/modal/address/jusoPopup.jsp",e,"width=570,height=420, scrollbars=yes, resizable=yes")},m.reload=function(){var e={procedureParam:"USP_SY_06CInfo01_GET"};u.getList(e).then(function(e){m.param=e.data.results[0][0]}).then(function(e){if(m.param.DC_REPREMI){var t=m.param.DC_REPREMI.split("@");m.param.DC_REPREMI={email1:t[0],email2:t[1]}}else m.param.email={email1:"",email2:""};m.CommsaleChange(),p.dataSource.read()})},m.fileSave=function(){var e=[];e.push(m.fileBsnsVO),e.push(m.fileCommVO),u.fileSaveExe(e)},m.isValid=function(e){var t=m.param;return t.NM_C.trim()?t.NM_RPSTT.trim()?/^\d{3}-\d{2}-\d{5}$/.test(t.NO_BSNSRGTT)?"Y"!=t.YN_COMMSALEREG||/^[a-z0-9_]{3}-[a-z0-9_]{2}-[a-z0-9_]{5}$/.test(t.NO_COMMSALEREG)?t.NO_PHNE&&!/^\d{2,3}-\d{3,4}-\d{4}$/.test(t.NO_PHNE)?edt.invalidFocus("userNO_PHNE","[형식] 전화번호은 유효하지 않은 형식입니다."):t.DC_HOPAURL&&!new RegExp("(http|https|ftp|telnet|news|irc)://([-/.a-zA-Z0-9_~#%$?&=:200-377()]+)","gi").test(t.DC_HOPAURL)?edt.invalidFocus("userDC_HOPAURL","[형식] 홈페이지URL은 유효하지 않은 형식입니다."):t.NO_ASPHNE&&!/^\d{2,3}-\d{3,4}-\d{4}$/.test(t.NO_ASPHNE)?edt.invalidFocus("userNO_ASPHNE","[형식] A/S전화번호는 유효하지 않은 형식입니다."):!((t.DC_REPREMI.email1||t.DC_REPREMI.email2)&&!/^[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[@]{1}[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[.]{1}[A-Za-z]{2,5}$/.test(t.DC_REPREMI.email1+"@"+t.DC_REPREMI.email2))||edt.invalidFocus("userEmail","[형식] 이메일은 유효하지 않은 형식입니다."):edt.invalidFocus("userNO_COMMSALEREG",'[형식] 통신판매신고번호는 유효하지 않은 형식입니다.(ex-"000-00-00000")'):edt.invalidFocus("userNO_BSNSTGTT",'[형식] 사업자등록번호는 유효하지 않은 형식입니다.(ex-"012-34-56789")'):edt.invalidFocus("userNM_RPSTT","[필수] 대표자명을 입력해주세요."):edt.invalidFocus("userNM_C","[필수] 회사명을 입력해주세요.")},m.doInsert=function(){if(confirm(APP_MSG.insert.confirm)){var e=m.makeGetParam("insert");m.isValid(e)&&n.saveCInfo(e).success(function(){})}},m.changeEmailDomain=function(){var e=m.param.DC_REPREMI.selectedDomain;""===e||null==e?(m.param.DC_REPREMI.disabled=!1,m.param.DC_REPREMI.email2=""):(m.param.DC_REPREMI.disabled=!0,m.param.DC_REPREMI.email2=e)},m.CommsaleChange=function(){var e=m.param.YN_COMMSALEREG;"Y"==e?angular.element("#userNO_COMMSALEREG").attr("readonly",!1):(m.param.NO_COMMSALEREG="",angular.element("#userNO_COMMSALEREG").attr("readonly",!0))};var p=e.gridWahoVO={messages:{noRows:"ERP 사용자정보가 존재하지 않습니다.",loading:"ERP 사용자정보를 가져오는 중...",requestFailed:"요청 ERP 사용자정보를 가져오는 중 오류가 발생하였습니다.",retry:"갱신",commands:{create:"추가",cancel:"취소",destroy:"삭제"}},edit:function(e){e.model.isNew()&&""==e.model.DC_NEWADDR&&(e.model.set("NM_WAHO",m.wParam.NM_WAHO),e.model.set("NO_POST",m.wParam.NO_POST),e.model.set("DC_NEWADDR",m.wParam.DC_NEWADDR),e.model.set("DC_OLDADDR",m.wParam.DC_OLDADDR),e.model.set("DC_DETADDR",m.wParam.DC_DETADDR),e.model.set("CD_PARS",m.wParam.CD_PARS),e.model.set("ROW_NUM","1"),e.model.set("CD_WAHODFT",m.wParam.CD_WAHODFT),m.wParam.NM_WAHO="",m.wParam.DC_NEWADDR="",m.wParam.DC_OLDADDR="",m.wParam.DC_DETADDR="",m.wParam.CD_PARS="",m.wParam.CD_WAHODFT="",m.wParam.NO_POST="")},isValid:function(e){var t=e;return t.CD_WAHODFT?t.NM_WAHO?t.NO_POST?!!t.DC_DETADDR||edt.invalidFocus("userW_DC_DETADDR","[형식] 상세주소는 유효하지 않은 형식입니다."):edt.invalidFocus("userW_NO_POST","[형식] 우편번호는 유효하지 않은 형식입니다."):edt.invalidFocus("userNM_WAHO","[형식] 창고명은 유효하지 않은 형식입니다."):edt.invalidFocus("userCD_WAHODFT","[형식] 창고유형은 유효하지 않은 형식입니다.")},dataSource:new kendo.data.DataSource({transport:{read:function(e){var t={procedureParam:"USP_SY_06CInfo02_GET"};u.getList(t).then(function(t){e.success(t.data.results[0])})},create:function(e){n.saveWaho(e.data.models,"I").success(function(){})},update:function(e){n.saveWaho(e.data.models,"U").success(function(){})},destroy:function(e){var t=r.defer();return n.saveWaho(e.data.models,"D").success(function(){t.resolve()}),t.promise},parameterMap:function(e,t){if("read"!==t&&e.models)return{models:kendo.stringify(e.models)}}},batch:!0,schema:{model:{id:"NO_WAHO",fields:{ROW_NUM:{editable:!1},NO_WAHO:{editable:!1},NM_WAHO:{},NO_POST:{validation:{required:!0}},DC_NEWADDR:{validation:{required:!0}},DC_OLDADDR:{},DC_DETADDR:{validation:{required:!0}},CD_PARS:{editable:!1},ITEM1:{editable:!1},ITEM2:{editable:!1},CD_WAHODFT:{}}}}}),navigatable:!0,toolbar:[{template:"<a class='k-button k-button-icontext k-grid-delivery-info' ng-click = 'gridWahoVO.add()'><span class='k-icon k-i-add'></span>추가</a>"},"cancel"],columns:[{field:"ROW_NUM",title:"No",width:40,template:"<span class='row-number'></span>"},{field:"NO_WAHO",title:"번호",width:100,hidden:!0},{field:"NM_WAHO",title:"창고명",width:250},{field:"DC_NEWADDR",title:"주소(도로명)",width:300},{field:"DC_DETADDR",title:"주소(상세)",width:250},{field:"ITEM1",title:"상품1",width:150},{field:"ITEM2",title:"상품2",width:150},{command:["destroy"]}],collapse:function(e){this.cancelRow()},editable:!0,height:300,dataBound:function(){var e=this.items();$(e).each(function(){var e=$(this).index()+1,t=$(this).find(".row-number");$(t).html(e)})},requestStart:function(e){var t=e.response,a=e.type;console.log(a),console.log(t.length)},add:function(){var e=$("#grid").data("kendoGrid");p.isValid(m.wParam)&&e.addRow()}};m.init()}])}(),function(){"use strict";angular.module("sy.CInfo.service").factory("sy.CInfoSvc",["APP_CONFIG","$http",function(e,t){return{saveWaho:function(a,r){return t({method:"POST",url:e.domain+"/sy06Waho/"+r,data:a})},saveCInfo:function(a){return t({method:"POST",url:e.domain+"/sy06CInfo",data:a})}}}])}(),function(){"use strict";var e=angular.module("sy.User",["sy.User.controller","sy.User.service"]);angular.module("sy.User.controller",[]),angular.module("sy.User.service",[]),e.config(["$stateProvider",function(e){e.state("app.syUser",{url:"/99sy/syUser/:kind?menu&ids",views:{contentView:{templateUrl:function(e){return e.menu&&(e.kind="list"),"app/contents/99sy/sy07User/templates/sy.User"+edt.getMenuFileName(e.kind)+".tpl.html"},controllerProvider:["$stateParams",function(e){return e.menu&&(e.kind="list"),"sy.User"+edt.getMenuFileName(e.kind)+"Ctrl"}],resolve:{resData:["AuthSvc","$q",function(e,t){var a=t.defer(),r={};return e.isAccess().then(function(e){r.access=e[0],a.resolve(r)}),a.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.User.controller").controller("sy.UserListCtrl",["$state","$scope","ngTableParams","$timeout","$sce","$filter","sy.UserListSvc","sy.CodeSvc","APP_CODE","sy.DeptSvc","resData","Page","UtilSvc",function(e,t,a,r,i,n,s,l,o,d,c,u,_){var m=t.page=new u({auth:c.access}),p=(edt.getToday(),t.syUserVO={selectedDeptIds:"*",selectedRankIds:"*",selectedStatIds:"*",selectedAtrtIds:"*",boxTitle:"검색",total:0,data:[],settingDept:{id:"NO_DEPT",name:"NM_DEPT",maxNames:2},settingCode:{id:"CD_DEF",name:"NM_DEF",maxNames:3},settingAtrt:{id:"NO_ATRT",name:"NM_ATRT",maxNames:3},departCodeList:[],rankCodeList:[],empStatList:[],atrtCodeList:[],searchName:""});p.tbl={columns:[{field:"DC_ID",visible:!0,title:"사원아이디"},{field:"NM_EMP",visible:!0,title:"성명"},{field:"NM_DEPT",visible:!0,title:"부서"},{field:"CD_RANK",visible:!0,title:"직급"},{field:"NO_CEPH",visible:!0,title:"휴대폰번호"},{field:"DC_EMIADDR",visible:!0,title:"E-mail"},{field:"CD_EMPSTAT",visible:!0,title:"상태"},{field:"NO_ATRT",visible:!0,title:"권한"},{field:"DT_EMP",visible:!0,title:"입사일자"}],tableParams:new a({page:1,count:10,isShowSelectLength:!1,sorting:{CREATE_DT:"desc"}},{total:p.data.length,getData:function(e,t){var a=t.sorting()?n("orderBy")(p.data,t.orderBy()):p.data;e.resolve(a.slice((t.page()-1)*t.count(),t.page()*t.count()))}})},p.init=function(){var e={procedureParam:"USP_SY_08ATRT01_GET"};p.getDepart({search:"all"}),p.getSubcodeList({cd:"SY_000020",search:"all"}),p.getSubcodeList({cd:"SY_000025",search:"all"}),p.getSubcodeList(e),p.searchName="",r(function(){m.isWriteable()||$("#userkg .k-grid-toolbar").hide()}),r(function(){var e=_.grid.getInquiryParam();e?(p.selectedDeptIds=e.DEPT_LIST,p.departCodeList.setSelectNames=e.DEPT_LIST_SELECT_INDEX,p.selectedRankIds=e.RANK_LIST,p.rankCodeList.setSelectNames=e.RANK_LIST_SELECT_INDEX,p.selectedStatIds=e.STAT_LIST,p.empStatList.setSelectNames=e.STAT_LIST_SELECT_INDEX,p.selectedAtrtIds=e.ATRT_LIST,p.atrtCodeList.setSelectNames=e.ATRT_LIST_SELECT_INDEX,p.searchName=e.SEARCH_NAME,f.dataSource.read()):f.dataSource.read()},1e3)},p.reset=function(){p.departCodeList.bReset=!0,p.rankCodeList.bReset=!0,p.empStatList.bReset=!0,p.atrtCodeList.bReset=!0,p.searchName=""},p.doInquiry=function(){f.dataSource.page(1),f.dataSource.read();var e={DEPT_LIST:p.selectedDeptIds,DEPT_LIST_SELECT_INDEX:p.departCodeList.allSelectNames,RANK_LIST:p.selectedRankIds,RANK_LIST_SELECT_INDEX:p.rankCodeList.allSelectNames,STAT_LIST:p.selectedStatIds,STAT_LIST_SELECT_INDEX:p.empStatList.allSelectNames,ATRT_LIST:p.selectedAtrtIds,ATRT_LIST_SELECT_INDEX:p.atrtCodeList.allSelectNames,SEARCH_NAME:p.searchName};_.grid.setInquiryParam(e)},p.getSubcodeList=function(e){var t=this;l.getSubcodeList(e).then(function(a){"SY_000020"==e.cd?t.rankCodeList=a.data:"SY_000025"==e.cd?t.empStatList=a.data:"USP_SY_08ATRT01_GET"==e.procedureParam&&_.getList(e).then(function(e){t.atrtCodeList=e.data.results[0]})})},p.getDepart=function(e){var t=this;s.getDepart(e).then(function(e){t.departCodeList=e.data})},p.moveInsertPage=function(){e.go("app.syUser",{kind:"insert",menu:null,ids:null})},$("#userkg").delegate("tbody>tr","dblclick",function(t,a){var r=$("#userkg").data("kendoGrid"),i=r.select(),n=r.dataItem(i);e.go("app.syUser",{kind:"detail",menu:null,ids:n.NO_EMP})});var f=t.gridUserVO={autoBind:!1,messages:{requestFailed:"사용자정보를 가져오는 중 오류가 발생하였습니다.",commands:{insert:"등록"},noRecords:"검색된 데이터가 없습니다."},boxTitle:"사용자 목록",selectable:!0,pageable:{messages:_.gridPageableMessages},noRecords:!0,dataSource:new kendo.data.DataSource({transport:{read:function(e){var t={procedureParam:"USP_SY_07USER01_GET&L_LIST01@s|L_LIST02@s|L_LIST03@s|L_LIST04@s|L_SEARCH_NAME@s",L_LIST01:p.selectedDeptIds,L_LIST02:p.selectedRankIds,L_LIST03:p.selectedStatIds,L_LIST04:p.selectedAtrtIds,L_SEARCH_NAME:p.searchName};_.getList(t).then(function(t){e.success(t.data.results[0])})}},pageSize:20,batch:!0,schema:{model:{id:"NO_ORD",fields:{DC_ID:{type:"string"},NM_EMP:{type:"string"},NM_DEPT:{type:"string"},CD_RANK:{type:"string"},NO_CEPH:{type:"string"},DC_EMIADDR:{type:"string"},CD_EMPSTAT:{type:"string"},NO_ATRT:{type:"string"},DT_EMP:{type:"string"}}}}}),navigatable:!0,toolbar:[{template:kendo.template($.trim($("#toolbar-template").html()))}],columns:[{field:"DC_ID",title:"사원아이디",width:"100px",headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"NM_EMP",title:"성명",width:"80px",headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"NM_DEPT",title:"부서",width:"70px",headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"CD_RANK",title:"직급",width:"60px",headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"NO_CEPH",title:"휴대폰번호",width:150,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"DC_EMIADDR",title:"E-mail",width:200,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"CD_EMPSTAT",title:"상태",width:50,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"NO_ATRT",title:"권한",width:50,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}},{field:"DT_EMP",title:"입사일자",width:100,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}}],height:658};p.init()}])}(),function(){"use strict";angular.module("sy.User.controller").controller("sy.UserInfoCtrl",["$state","$scope","sy.UserInfoSvc","$modal","sy.CodeSvc","sy.DeptSvc","sy.AtrtSvc","$stateParams","APP_MSG","APP_CODE","$q","resData","FieldVO","Page","UtilSvc","sy.UserListSvc",function(e,t,a,r,i,n,s,l,o,d,c,u,_,m,p,f){var D=(t.page=new m({auth:u.access}),edt.getToday(),t.syUserVO={boxTitle:"유저등록",param:{NO_EMP:"",DC_ID:"",DC_PWD:"",NM_EMP:"",NO_DEPT:"",NM_DEPT:"",CD_RANK:"",NM_RANK:"",CD_OCC:"",NM_OCC:"",NO_ATRT:"",NM_ATRT:"",NO_CEPH:"",DC_EMIADDR:"",CD_EMPSTAT:"",DT_RESI:"",YN_SMS:"N",DTS_SMS:"",YN_EMI:"N",DTS_EMI:"",email:{disabled:!1,email1:"",email2:"",selectedDomain:""}},selectedDepart:"",selectedRank:"",selectedRole:"",selectedWorkgroup:"",departCodeList:[],rankCodeList:[],workgroupCodeList:[],roleCodeList:[],today:new Date,superiorNm:"",confirmDC_PWD:"",checkMsg:"비밀번호를 입력해주세요.(6자리이상 ~ 15자리이하)"});D.init=function(){if(D.kind=l.kind,D.ids=l.ids||"",D.title="insert"===l.kind?"등록":"수정","insert"===D.kind){if(!t.page.isWriteable())throw new Error("접근 권한이 없습니다.");D.initInsert()}else D.initUpdate()},D.makeGetParam=function(){var e={NO_EMP:"",DC_ID:D.param.DC_ID?D.param.DC_ID.toLowerCase():D.param.DC_ID,DC_PWD:""===D.param.DC_PWD?null:D.param.DC_PWD,NM_EMP:D.param.NM_EMP,NO_DEPT:D.selectedDepart.NO_DEPT,CD_RANK:D.selectedRank.CD_DEF,CD_OCC:D.selectedWorkgroup.CD_DEF,NO_ATRT:D.param.NO_ATRT,NO_CEPH:""===D.param.NO_CEPH?null:D.param.NO_CEPH,DC_EMIADDR:D.param.email.email1.length>0||D.param.email.email2.length>0?D.param.email.email1+"@"+D.param.email.email2:null,YN_SMS:D.param.YN_SMS,DTS_SMS:"",YN_EMI:D.param.YN_EMI,DTS_EMI:"",DT_RESI:""};return"detail"===D.kind&&(e.NO_EMP=D.ids,e.CD_EMPSTAT=D.param.CD_EMPSTAT,e.DT_RESI=edt.isValid(D.param.DT_RESI)?D.param.DT_RESI:null,e.DTS_SMS="Y"==D.param.YN_SMS?D.param.DTS_SMS:null,e.DTS_EMI="Y"==D.param.YN_EMI?D.param.DTS_EMI:null),e},D.initInsert=function(){var e={procedureParam:"USP_SY_08ATRT01_GET"};c.all([f.getDepart({search:"all"}).then(function(e){return e.data}),i.getSubcodeList({cd:"SY_000020",search:"all"}).then(function(e){return e.data}),i.getSubcodeList({cd:"SY_000023",search:"all"}).then(function(e){return e.data}),p.getList(e).then(function(e){return e.data.results[0]})]).then(function(e){D.departCodeList=e[0],D.rankCodeList=e[1],D.workgroupCodeList=e[2],D.roleCodeList=e[3]})},D.initUpdate=function(){var e,t={procedureParam:"USP_SY_08ATRT01_GET"},a={procedureParam:"USP_SY_07USER02_GET&L_NO_CHECK_EMP@s",L_NO_CHECK_EMP:D.ids};c.all([f.getDepart({search:"all"}).then(function(e){return e.data}),i.getSubcodeList({cd:"SY_000020",search:"all"}).then(function(e){return e.data}),i.getSubcodeList({cd:"SY_000023",search:"all"}).then(function(e){return e.data}),p.getList(t).then(function(e){return e.data.results[0]}),p.getList(a).then(function(e){return e.data.results[0][0]})]).then(function(t){D.departCodeList=t[0],D.rankCodeList=t[1],D.workgroupCodeList=t[2],D.roleCodeList=t[3],D.param=t[4],D.param.DC_PWD="",D.param.DC_EMIADDR?(e=D.param.DC_EMIADDR.split("@"),D.param.email={email1:e[0],email2:e[1]}):D.param.email={email1:"",email2:""},D.setSubCode()})},D.setSubCode=function(){angular.forEach(D.departCodeList,function(e){e.NO_DEPT===D.param.NO_DEPT&&(D.selectedDepart=e)}),angular.forEach(D.rankCodeList,function(e){e.CD_DEF===D.param.CD_RANK&&(D.selectedRank=e)}),angular.forEach(D.workgroupCodeList,function(e){e.CD_DEF===D.param.CD_OCC&&(D.selectedWorkgroup=e)})},D.isValid=function(e){var t=D.param;if("insert"===D.kind){if(!t.DC_ID)return edt.invalidFocus("userCD","[필수] ID를 입력해주세요.");if(!/^[a-zA-Z0-9]{3,15}$/.test(t.DC_ID))return edt.invalidFocus("userCD","[형식] ID는 유효하지 않은 형식입니다. 영문(대소문자 구분 안함), 숫자만 가능합니다.");if(!t.DC_PWD)return edt.invalidFocus("userPw","[필수] 패스워드를 입력해주세요.");if(!/^[a-zA-Z0-9~`|!@#$%^&*()[\]\-=+_|{};':\\\"<>?,.\/]{5,14}$/.test(t.DC_PWD))return edt.invalidFocus("userPw","[형식] 패스워드는 유효하지 않은 형식입니다. 5~14자리 이하입니다.");if(D.confirmDC_PWD!==t.DC_PWD)return edt.invalidFocus("userChkPw","[MATCH] 비밀번호가 일치하지 않습니다.")}else if(t.DC_PWD||D.confirmDC_PWD.length>0){if(!/^[a-zA-Z0-9~`|!@#$%^&*()[\]\-=+_|{};':\\\"<>?,.\/]{8,15}$/.test(t.DC_PWD))return edt.invalidFocus("userPw","[형식] 패스워드는 유효하지 않은 형식입니다. 8~15자리 이하입니다.");if(D.confirmDC_PWD!==t.DC_PWD)return edt.invalidFocus("userChkPw","[MATCH] 비밀번호가 일치하지 않습니다.")}if(!t.NM_EMP)return edt.invalidFocus("userName","[필수] 이름을 입력해주세요.");if(!/^[가-힣a-zA-Z][가-힣a-zA-Z ]{1,19}$/.test(t.NM_EMP))return edt.invalidFocus("userName","[형식] 이름은 유효하지 않은 형식입니다. 영문, 한글, 공백만 사용 가능합니다.");if(!D.selectedDepart.NO_DEPT)return edt.invalidFocus("userDepart","[필수] 부서를 선택해주세요");if(!/\d+$/.test(D.selectedDepart.NO_DEPT))return edt.invalidFocus("userDepart","[형식] 부서는 유효하지 않은 형식입니다.");if(!D.selectedRank.CD_DEF)return edt.invalidFocus("userPosition","[필수] 직급을 선택해주세요");if(!/\d+$/.test(D.selectedRank.CD_DEF))return edt.invalidFocus("userPosition","[형식] 직급은 유효하지 않은 형식입니다.");if(!D.selectedWorkgroup.CD_DEF)return edt.invalidFocus("userWork","[필수] 직군을 선택해주세요");if(!/\d+$/.test(D.selectedWorkgroup.CD_DEF))return edt.invalidFocus("userWork","[형식] 직군은 유효하지 않은 형식입니다.");if(!t.NO_ATRT)return edt.invalidFocus("userAuth","[필수] 권한을 선택해주세요");if(!/\d+$/.test(t.NO_ATRT))return edt.invalidFocus("userAuth","[형식] 권한은 유효하지 않은 형식입니다.");if(t.NO_CEPH&&!/(^0\d{1,2}-[1-9]\d{2,3}-\d{4}$|^\d{3,4}-\d{4}$)/.test(t.NO_CEPH))return edt.invalidFocus("userPhone",'[형식] PHONE은 유효하지 않은 형식입니다.(ex-"010-4233-2211")');if(!t.email.email1&&!t.email.email2)return edt.invalidFocus("userEmail","[필수] 이메일을 입력해주세요");if(!/^[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[@]{1}[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[.]{1}[A-Za-z]{2,5}$/.test(t.email.email1+"@"+t.email.email2))return edt.invalidFocus("userEmail","[형식] 이메일은 유효하지 않은 형식입니다.");if("detail"===D.kind){if("002"===t.CD_EMPSTAT&&!t.DT_RESI)return edt.invalidFocus("userRetired","[필수] 퇴사일자를 입력해주세요.");if(t.DT_RESI){if(!moment(t.DT_RESI,"YYYY-MM-DD",!0).isValid())return edt.invalidFocus("userRetired",'[형식] 퇴사일자는 유효하지 않은 형식입니다.(ex-"2014-11-18")');if("002"!==t.CD_EMPSTAT)return edt.invalidFocus("userStatus","[필수] 재직상태를 퇴사로 변경해주세요.")}}return!0},D.doInsert=function(){if(confirm(o.insert.confirm)){var t=D.makeGetParam("insert");D.isValid(t)&&a.insert(t).then(function(){alert(o.insert.success),e.go("app.syUser",{kind:"list",menu:!0,ids:null})})}},D.doUpdate=function(){if(confirm(o.update.confirm)){var t=D.makeGetParam("detail");D.isValid(t)&&a.update(t).then(function(){alert(o.update.success),e.go("app.syUser",{kind:"list",menu:!0,ids:null})})}},D.changeEmailDomain=function(){var e=D.param.email.selectedDomain;""===e?(D.param.email.disabled=!1,D.param.email.email2=""):(D.param.email.disabled=!0,D.param.email.email2=e)},D.isCheckPassword=function(){var e=D.param.DC_PWD||"",t=D.confirmDC_PWD||"",a=e===t;e.length>=6?a?D.checkMsg="비밀번호가 일치합니다.":D.checkMsg="비밀번호 서로 다릅니다.":D.checkMsg="비밀번호를 입력해주세요.(5자리이상 ~ 14자리이하)"},D.doCancel=function(){e.go("app.syUser",{kind:"list",menu:!0,ids:null})},D.init()}])}(),function(){"use strict";angular.module("sy.User.service").factory("sy.UserListSvc",["APP_CONFIG","$http",function(e,t){return{getUserList:function(a){return t({method:"GET",url:e.domain+"/user?"+a})},getUserSearchCode:function(a){return t({method:"GET",url:e.domain+"/user?"+a})},makeGetUserParam:function(e){var t="",a={dept:"all",pos:"all",name:"all",status:"JOINED"};return angular.isArray(e)?t=edt.makeGetParam(e,"sel_dept"):(edt.extend(e,a,!1),t=$.param(e)),t},getDepart:function(a){var r=e.domain+"/sy07UserDept";return angular.isObject(a)&&(r+="?"+$.param(a)),t({method:"GET",url:r})}}}])}(),function(){"use strict";angular.module("sy.User.service").factory("sy.UserInfoSvc",["APP_CONFIG","$http",function(e,t){return{getUserDetailInfo:function(a){return t({method:"GET",url:e.domain+"/user/"+decodeURIComponent(a.cd)})},insert:function(a){return t({method:"POST",url:e.domain+"/user",data:a})},update:function(a){return t({method:"PUT",url:e.domain+"/user",data:a})}}}])}(),function(){"use strict";var e=angular.module("sy.Atrt",["sy.Atrt.controller","sy.Atrt.service"]);angular.module("sy.Atrt.controller",[]),angular.module("sy.Atrt.service",[]),e.config(["$stateProvider",function(e){e.state("app.syAtrt",{url:"/99sy/syAtrt?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy08Atrt/templates/sy.Atrt.tpl.html",controller:"sy.AtrtMngCtrl",resolve:{resData:["$stateParams","$q","AuthSvc","sy.AtrtSvc",function(e,t,a){var r=t.defer(),i={};return a.isAccess().then(function(e){i.access=e[0],r.resolve(i)}),r.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Atrt.controller").controller("sy.AtrtMngCtrl",["$scope","$q","$timeout","sy.AtrtSvc","resData","$interval","Page","UtilSvc",function(e,t,a,r,i,n,s,l){var o=(e.page=new s({auth:i.access}),edt.getToday(),'<div ng-click="grid.appScope.syAtrtVO.rowClick(row)" ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ui-grid-cell></div>'),d=e.syAtrtVO={boxTitle:"권한정보",searchNm:"",deleteData:[],select:{NO_ATRT:"",NM_ATRT:""}};d.options={multiSelect:!1,enableRowSelection:!0,enableCellEditOnFocus:!0,data:[],height:690,rowTemplate:o,procedureParam:"USP_SY_08ATRT01_GET",columnDefs:[{displayName:"권한코드",field:"NO_ATRT",width:100,enableCellEdit:!1},{displayName:"권한이름",field:"NM_ATRT",width:150,enableCellEdit:!0},{displayName:"사용여부",field:"YN_USE",width:100,enableCellEdit:!0,cellClass:"ta-c",cellFilter:"ynUse",
editableCellTemplate:"ui-grid/dropdownEditor",editDropdownValueLabel:"YN_USE",editDropdownOptionsArray:[{id:"Y",YN_USE:"사용"},{id:"N",YN_USE:"사용안함"}]},{displayName:"수정일시",field:"DTS_UPDATE",width:120,enableCellEdit:!1}],onRegisterApi:function(t){d.gridApi=t,t.edit.on.afterCellEdit(e,function(e){e.NO_ATRT&&""!==e.NO_ATRT&&(e.STATE="U")})}},d.initLoad=function(){var t=this;t.inquiry(),e.$on("admin.auth:init",function(){t.inquiry()})},d.init=function(){this.deleteData=[],this.inquiry()},d.inquiry=function(){var e=this,t={procedureParam:e.options.procedureParam};l.getList(t).then(function(t){e.options.data=t.data.results[0];var a=e.select.NO_ATRT;if(""!==a){var r=null;angular.forEach(e.options.data,function(e){e.NO_ATRT===a&&(r=e)}),e.gridApi.selection.selectRow(r)}})},d.makeGridEntity=function(){return{STATE:"I",NO_ATRT:"",NM_ATRT:"",YN_USE:"Y",DTS_UPDATE:""}},d.makePostParam=function(e){var t={STATE:e.STATE,NM_ATRT:e.NM_ATRT,YN_USE:e.YN_USE};return"U"!==e.STATE&&"D"!==e.STATE||(t.NO_ATRT=e.NO_ATRT),t},d.add=function(){var t,a=this;t=a.makeGridEntity(),a.options.data.push(t),r.saveAuth([{NM_ATRT:" ",YN_USE:"Y",STATE:"I"}]).then(function(r){a.select.NO_ATRT=r.data.NO_ATRT,t.STATE="U",t.NO_ATRT=r.data.NO_ATRT,a.gridApi.cellNav.scrollToFocus(t,a.options.columnDefs[1]),a.select.NO_ATRT=t.NO_ATRT,a.select.NM_ATRT=t.NM_ATRT,a.gridApi.selection.selectRow(t),e.$broadcast("authMng.menu:inquiry",a.select)})},d["delete"]=function(){var e,t,a,r,i=this,n=i.options.data,s=i.gridApi.selection.getSelectedRows();if(0===s.length)return void alert("삭제할 데이터를 선택해주세요.");for(e=0,t=n.length;e<t;e+=1)for(a=0,r=s.length;a<r;a+=1)n[e]===s[a]&&(n.splice(e,1),s[a].NO_ATRT&&""!==s[a].NO_ATRT&&(s[a].STATE="D",i.deleteData.push(i.makePostParam(s[a]))))},d.save=function(){if(confirm("저장시 변경된 데이터는 복구 불가능합니다.")&&confirm("저장하시겠습니까?")){var t=this,a=t.options.data,i=t.deleteData,n=[];if(angular.forEach(a,function(e){"U"!==e.STATE&&"I"!==e.STATE||n.push(t.makePostParam(e))}),n=n.concat(i),!t.isValid(n))return void alert("유효하지않은 데이터입니다.");n.length>0?(e.$emit("event:autoLoader",!1),r.saveAuth(n).then(function(a){t.deleteData=[],t.select.NO_ATRT="",t.select.NM_ATRT="",e.$broadcast("authMng.menu:save",n)})):e.$broadcast("authMng.menu:save",n)}},d.rowClick=function(t){this.select.NO_ATRT=t.entity.NO_ATRT,this.select.NM_ATRT=t.entity.NM_ATRT,t.isSelected&&e.$broadcast("authMng.menu:inquiry",this.select)},d.isValid=function(e){var t=!0;return angular.forEach(e,function(e){"D"===e.STATE||e.NM_ATRT.trim()||(t=!1)}),t},d.initLoad()}])}(),function(){"use strict";angular.module("sy.Atrt.controller").controller("sy.AtrtMenuCtrl",["$scope","sy.AtrtSvc","sy.CodeSvc","APP_CODE",function(e,t,a,r){var i="<div class='edt-tree-view-col-content'><select title='선택' data-ng-model='row.entity[col.field]'data-ng-options='auth.CD_DEF as auth.NM_DEF for auth in tree.appScope.menuVO.roleCodeList'data-ng-change=\"tree.appScope.menuVO.changeBuAuth(row, col.field)\"></select></div>",n="<div class='edt-tree-view-col-content'><select title='선택' data-ng-model='row.entity[col.field]'data-ng-options='auth.CD_DEF as auth.NM_DEF for auth in tree.appScope.menuVO.roleCodeList'data-ng-change=\"tree.appScope.menuVO.changeBuAuth(row, col.field)\"></select></div>",s={},l=e.menuVO={boxTitle:"메뉴정보",select:{NO_ATRT:"",NM_ATRT:""},roleCodeList:[]};l.options={data:[],colDefs:[{field:"POS",displayName:"메뉴코드",width:180},{field:"NM_M",displayName:"메뉴이름",width:300,type:"tree"},{field:"CD_ACC",displayName:"접근권한",width:140,className:"ta-c",colTemplate:i},{field:"CD_WRITE",displayName:"등록/수정권한",width:140,className:"ta-c",colTemplate:n}],primaryName:"POS",parentName:"PARENT",height:680,onRegisterApi:function(e){l.treeApi=e}},l.initLoad=function(){var t=this;e.$on("authMng.menu:inquiry",function(e,a){a&&a.NO_ATRT&&(t.treeApi.showData&&t.treeApi.showData.length>0&&(s[t.select.NO_ATRT]=t.treeApi.showData.map(function(e){return angular.copy(e.entity)})),t.select.NO_ATRT=a.NO_ATRT,t.select.NM_ATRT=a.NM_ATRT,t.boxTitle="메뉴정보 - "+t.select.NM_ATRT+" 선택 중",t.inquiry())}),e.$on("authMng.menu:save",function(e,a){t.save(a)}),a.getSubcodeList({cd:"SY_000026",search:"all"}).then(function(e){t.roleCodeList=e.data})},l.init=function(){l.inquiry()},l.toggleProp=function(e,t){function a(e,t,a){edt.each(e,"_children",function(e){e.entity[t]=a})}function r(e,a,r){edt.each(e,"_parent",function(e){var i=e.entity[a];if("Y"===r)r!==i&&(e.entity[t]=r);else{var n=!1;edt.each(e._children,"_children",function(e){e.entity[a]!==r&&(n=!0)}),n||(e.entity[t]=r)}})}var i=e.entity[t];a(e._children,t,i),r(e,t,i)},l.changeBuAuth=function(e,t){var a=e.entity[t];1==e.id&&"001"!=a||edt.each(e._children,"_children",function(e){e.entity[t]=a}),edt.each(e._parent,"_parent",function(e){var r,i,n;if(e._children)for(r=0,i=e._children.length;r<i;r++)if(n=e._children[r],n.entity[t]!==a)return!1;e.entity[t]=a})},l.makeReqParam=function(){return""!==this.select.NO_ATRT?{NO_ATRT:this.select.NO_ATRT}:null},l.makeSaveParam=function(e){function t(e,t){e=e||[];var a=e.filter(function(e){return e.NO_ATRT===t&&"D"===e.STATE});return a.length>0}var a,r,i=this,n=(i.treeApi.showData,[]);for(r in s)if(s.hasOwnProperty(r)){if(a=s[r],t(e,r))continue;angular.forEach(a,function(e){e.NO_ATRT?e.STATE="U":(e.NO_ATRT=r,e.STATE="I"),n.push(e)})}return n},l.inquiry=function(){var e=this;t.getMenuAuthList(e.makeReqParam()).then(function(t){s[e.select.NO_ATRT]=e.options.data=t.data})},l.save=function(a){function r(){i.select.NO_ATRT="",i.select.NM_ATRT="",i.boxTitle="메뉴정보",i.options.data=[]}var i=this,n=i.makeSaveParam(a);n.length>0?t.saveMenuAuth(n).then(function(){s={},e.$emit("event:autoLoader",!0),alert("저장되었습니다."),r(),e.$emit("admin.auth:init")}):(s={},e.$emit("event:autoLoader",!0),alert("저장되었습니다."),r(),e.$emit("admin.auth:init"))},l.hasShowData=function(){return 0===this.treeApi.showData.length},l.toggleAll=function(e){this.treeApi.toggleAll(e)},l.initLoad()}])}(),function(){"use strict";angular.module("sy.Atrt.service").factory("sy.AtrtSvc",["APP_CONFIG","$http",function(e,t){return{getAuthList:function(){var a=e.domain+"/sy08Atrt";return t({method:"GET",url:a})},getMenuAuthList:function(a){var r=e.domain+"/sy08MenuAtrt";return angular.isObject(a)&&(r+="?"+$.param(a)),t({method:"GET",url:r})},saveAuth:function(a){return t({method:"POST",url:e.domain+"/sy08Atrt",data:a})},saveMenuAuth:function(a){return t({method:"POST",url:e.domain+"/sy08MenuAtrt",data:a})}}}])}(),function(){"use strict";var e=angular.module("sy.Mrk",["sy.Mrk.controller","sy.Mrk.service"]);angular.module("sy.Mrk.controller",[]),angular.module("sy.Mrk.service",[]),e.config(["$stateProvider",function(e){e.state("app.syMrk",{url:"/99sy/syMrk?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy09Mrk/templates/sy.Mrk.tpl.html",controller:"sy.MrkCtrl",resolve:{resData:["AuthSvc","$q","UtilSvc",function(e,t,a){var r=t.defer(),i={};return e.isAccess().then(function(e){i.access=e[0],r.resolve(i)}),r.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Mrk.controller").controller("sy.MrkCtrl",["$scope","$http","$q","$log","sy.MrkSvc","APP_CODE","$timeout","resData","Page","UtilSvc","sy.CodeSvc",function(e,t,a,r,i,n,s,l,o,d,c){function u(e){e.preventDefault();var t=this.dataItem($(e.currentTarget).closest("tr"));if(void 0==t.NO_MRK||""==t.NO_MRK)return void alert("저장 후에 연동 버튼을 클릭하여 주세요.");var a={NO_MNGMRK:t.NO_MNGMRK,DC_MRKID:t.DC_MRKID};i.conMrk(a,e).then(function(e){alert(e.data),g.dataSource.read()})}function _(e){e.preventDefault(),e.stopPropagation()}var m=e.page=new o({auth:l.access}),p=edt.getToday(),f={"class":"table-header-cell",style:"text-align: center; font-size: 12px"},D=e.dateVO={boxTitle:"검색",selectedMrkIds:"*",selectedItlStatIds:"*",settingMrk:{id:"NO_MNGMRK",name:"NM_MRK",maxNames:3},settingItlStat:{id:"CD_DEF",name:"NM_DEF",maxNames:2},MrkCodeList:[],cdMrkDftDataSource:l.cdMrkDftDataSource,cdNtDataSource:l.cdNtDataSource,ynUseDataSource:[{NM_DEF:"사용",CD_DEF:"Y"},{NM_DEF:"사용안함",CD_DEF:"N"}],ItlStatCodeList:[],datesetting:{dateType:"market",buttonList:["current","1Day","1Week","1Month"],selected:"1Day",period:{start:angular.copy(p),end:angular.copy(p)}}};D.doInit=function(){var t={procedureParam:"USP_SY_09MRK01_GET"};D.getSubCodeList({cd:"SY_000017",search:"all"}),D.getSubCodeList(t);var a=d.grid.getInquiryParam();s(function(){m.isWriteable()||$("#mrkKg .k-grid-toolbar").hide()}),s(function(){a&&(D.selectedMrkIds=a.MRK_LIST,D.MrkCodeList.setSelectNames=a.MRK_SELECT_INDEX,D.selectedItlStatIds=a.STAT_LIST,D.ItlStatCodeList.setSelectNames=a.STAT_SELECT_INDEX,D.datesetting.period.start=a.START_DATE,D.datesetting.period.end=a.END_DATE,e.gridMrkVO.dataSource.read())},1e3)},D.reset=function(){D.MrkCodeList.bReset=!0,D.ItlStatCodeList.bReset=!0,D.datesetting.selected="1Day"},D.isOpen=function(t){setTimeout(function(){m.isWriteable()||($(".k-grid-delete").addClass("k-state-disabled"),$(".k-grid-delete").click(_),$(".k-grid-연동체크").addClass("k-state-disabled"),$(".k-grid-연동체크").click(_))}),t?(e.mrkKg.wrapper.height(657),e.mrkKg.resize(),g.dataSource.pageSize(20)):(e.mrkKg.wrapper.height(798),e.mrkKg.resize(),g.dataSource.pageSize(24))},D.getSubCodeList=function(e){var t=this;c.getSubcodeList(e).then(function(a){"SY_000017"==e.cd?t.ItlStatCodeList=a.data:"USP_SY_09MRK01_GET"==e.procedureParam&&d.getList(e).then(function(e){t.MrkCodeList=e.data.results[0]})})},D.doInquiry=function(){g.dataSource.read();var e={MRK_LIST:D.selectedMrkIds,MRK_SELECT_INDEX:D.MrkCodeList.allSelectNames,STAT_LIST:D.selectedItlStatIds,STAT_SELECT_INDEX:D.ItlStatCodeList.allSelectNames,START_DATE:D.datesetting.period.start,END_DATE:D.datesetting.period.end};d.grid.setInquiryParam(e)};var C=function(e){var t=!0;return angular.forEach(e.data,function(e){t&&(null===e.NM_MRK||""===e.NM_MRK?(alert("마켓명을 입력해 주세요"),t=!1):null===e.DC_MRKID||""===e.DC_MRKID?(alert("마켓ID를 입력해 주세요"),t=!1):null!==e.NEW_DC_PWD&&""!==e.NEW_DC_PWD||(alert("비밀번호를 입력해 주세요"),t=!1))}),t},g=e.gridMrkVO={messages:{noRows:"마켓정보가 존재하지 않습니다.",loading:"마켓정보를 가져오는 중...",requestFailed:"요청 마켓정보를 가져오는 중 오류가 발생하였습니다.",retry:"갱신",commands:{create:"추가",destroy:"삭제",save:"저장",cancel:"취소"}},edit:function(e){e.model.isNew()&&""==e.model.YN_USE&&(e.model.set("YN_USE","Y"),e.model.set("CD_ITLSTAT","001"))},boxTitle:"마켓 정보",pageable:{messages:d.gridPageableMessages},dataSource:new kendo.data.DataSource({transport:{read:function(e){var t={procedureParam:"USP_SY_09MRK02_GET&L_LIST01@s|L_LIST02@s|L_START_DATE@s|L_END_DATE@s",L_LIST01:D.selectedMrkIds,L_LIST02:D.selectedItlStatIds,L_START_DATE:new Date(D.datesetting.period.start.y,D.datesetting.period.start.m-1,D.datesetting.period.start.d).dateFormat("Ymd"),L_END_DATE:new Date(D.datesetting.period.end.y,D.datesetting.period.end.m-1,D.datesetting.period.end.d).dateFormat("Ymd")};d.getList(t).then(function(t){e.success(t.data.results[0]),setTimeout(function(){m.isWriteable()||($(".k-grid-delete").addClass("k-state-disabled"),$(".k-grid-delete").click(_),$(".k-grid-연동체크").addClass("k-state-disabled"),$(".k-grid-연동체크").click(_))})})},create:function(e){var t=a.defer(),r={data:e.data.models};return!!C(r)&&(i.saveUserMrk(e.data.models,"I").success(function(){t.resolve(),g.dataSource.read()}).error(function(){t.resolve(),e.error()}),t.promise)},update:function(e){var t=a.defer(),r={data:e.data.models};return!!C(r)&&(i.saveUserMrk(e.data.models,"U").success(function(){t.resolve(),g.dataSource.read()}).error(function(){t.resolve(),e.error()}),t.promise)},destroy:function(e){var t=a.defer();return i.saveUserMrk(e.data.models,"D").success(function(){t.resolve(),g.dataSource.read()}).error(function(){t.resolve(),e.error()}),t.promise},parameterMap:function(e,t){if("read"!==t&&e.models)return{models:kendo.stringify(e.models)}}},batch:!0,pageSize:20,schema:{model:{id:"NO_MNGMRK",fields:{ROW_NUM:{type:"number",editable:!1},NO_MNGMRK:{type:"string",validation:{required:{message:"관리마켓을 입력하여 주세요."}}},NM_MRK:{type:"string",validation:{required:{message:"마켓명을 입력하여 주세요."}}},NM_MRKDFT:{type:"string",editable:!1},DT_ITLSTART:{type:"string",editable:!1},CD_ITLSTAT:{type:"string",editable:!1},DC_MRKID:{type:"string",editable:!0,validation:{required:{message:"마켓ID를 입력하여 주세요."}}},DC_PWD:{type:"string"},NEW_DC_PWD:{type:"string",validation:{new_dc_pwdvalidation:function(e){if(e.is("[name='NEW_DC_PWD']")&&""!=e.val()){var t=/\s/g;return e.attr("data-new_dc_pwdvalidation-msg","비밀번호를 50자 이하로 설정하거나, 공백을 제거하고 설정해 주세요."),!(t.test(e.val())===!0||e.val().length>50)}return!0}},editable:!0,nullable:!1},API_KEY:{type:"string"},NEW_API_KEY:{type:"string",defaultValue:"",validation:{new_api_keydvalidation:function(e){if(e.is("[name='NEW_API_KEY']")&&""!=e.val()){var t=/\s/g;return e.attr("data-new_api_keydvalidation-msg","API KEY를 50자 이하로 설정하거나, 공백을 제거하고 설정해 주세요."),!(t.test(e.val())===!0||e.val().length>50)}return!0}},editable:!0,nullable:!0},DC_SALEMNGURL:{type:"string",editable:!1},YN_USE:{type:"string"},NM_NT:{type:"string",editable:!1},DTS_INSERT:{type:"string",editable:!1},DTS_UPDATE:{type:"string",editable:!1},NM_UPDATE:{type:"string",editable:!1}}}}}),navigatable:!0,autoBind:!1,resizable:!0,toolbar:["create","save","cancel"],columns:[{field:"ROW_NUM",title:"No",width:50,template:"<span class='row-number'></span>",headerAttributes:f},{field:"NO_MNGMRK",title:"<span class='form-required'>* </span>관리마켓",width:100,headerAttributes:f,editor:function(e,t){g.dropDownEditor(e,t,D.MrkCodeList,["NM_MRK","NO_MNGMRK"])},template:function(e){for(var t=e.NM_MRK.hasOwnProperty("NO_MNGMRK")?"":e.NM_MRK,a=D.MrkCodeList,r=0,i=a.length;r<i;r++)a[r].NO_MNGMRK===e.NO_MNGMRK&&(t=a[r].NM_MRK,""===e.DC_SALEMNGURL&&(e.DC_SALEMNGURL=a[r].DC_SALEMNGURL),""===e.NM_MRKDFT&&(e.NM_MRKDFT=a[r].NM_MRKDFT),""===e.NM_NT&&(e.NM_NT=a[r].NM_NT));return t}},{field:"NM_MRK",title:"<span class='form-required'>* </span>마켓명",width:100,headerAttributes:f},{field:"NM_MRKDFT",title:"마켓구분",width:100,headerAttributes:f},{field:"DT_ITLSTART",title:"연동시작일자",width:90,headerAttributes:f},{field:"CD_ITLSTAT",title:"연동상태",width:80,editor:function(e,t){g.dropDownEditor(e,t,D.ItlStatCodeList,["NM_DEF","CD_DEF"])},template:function(e){return g.fTemplate(e,D.ItlStatCodeList,["CD_DEF","NM_DEF","CD_ITLSTAT"])},headerAttributes:f},{field:"DC_MRKID",title:"<span class='form-required'>* </span>마켓ID",width:100,headerAttributes:f,attributes:{"class":"ta-l"}},{field:"NEW_DC_PWD",title:"<span class='form-required'>* </span>비밀번호",width:140,editor:function(e,t){$('<input type="password" class="k-textbox" required="required" data-required-msg="비밀번호를 입력하여 주세요." name="'+t.field+'"/>').appendTo(e)},template:function(e){var t="";return""==e.NEW_DC_PWD||null==e.NEW_DC_PWD&&""!=e.DC_PWD?null!=e.DC_PWD_LEN&&(t=Array(e.DC_PWD_LEN+1).join("*")):""!=e.NEW_DC_PWD&&null!=e.NEW_DC_PWD&&(t=Array(e.NEW_DC_PWD.length+1).join("*")),t},headerAttributes:f,attributes:{"class":"ta-l"}},{field:"NEW_API_KEY",title:"API_KEY",width:100,editor:function(e,t){$('<input type="password" class="k-textbox" name="'+t.field+'"/>').appendTo(e)},template:function(e){var t="";return""==e.NEW_API_KEY||null==e.NEW_API_KEY&&""!=e.API_KEY?null!=e.API_KEY_LEN&&(t=Array(e.API_KEY_LEN+1).join("*")):""!=e.NEW_API_KEY&&null!=e.NEW_API_KEY&&(t=Array(e.NEW_API_KEY.length+1).join("*")),t},headerAttributes:f,attributes:{"class":"ta-l"}},{field:"DC_SALEMNGURL",title:"판매관리URL",width:250,headerAttributes:f,attributes:{"class":"ta-l",style:"text-overflow:ellipsis; white-space:nowrap; overflow:hidden;"}},{field:"YN_USE",title:"사용여부",width:80,editor:function(e,t){g.dropDownEditor(e,t,D.ynUseDataSource,["NM_DEF","CD_DEF"])},template:function(e){return g.fTemplate(e,D.ynUseDataSource,["CD_DEF","NM_DEF","YN_USE"])},headerAttributes:f},{field:"NM_NT",title:"국가",width:80,headerAttributes:f},{field:"DTS_INSERT",title:"등록일자",width:80,headerAttributes:f},{field:"DTS_UPDATE",title:"수정일자",width:80,headerAttributes:f},{field:"NM_UPDATE",title:"수정자",width:80,headerAttributes:f},{command:[{text:"연동체크",click:u},"destroy"],attributes:{"class":"ta-l"}}],collapse:function(e){this.cancelRow()},editable:{confirmation:!!m.isWriteable()&&"삭제하시겠습니까?\n삭제 후 저장버튼을 클릭하셔야 삭제 됩니다."},dataBound:function(){var e=this.items();$(e).each(function(){var e=$(this).index()+1,t=$(this).find(".row-number");$(t).html(e)})},height:657};g.dropDownEditor=function(e,t,a,r){$("<input required name="+t.field+' data-bind="value:'+t.field+'" />').appendTo(e).kendoDropDownList({autoBind:!0,dataTextField:r[0],dataValueField:r[1],dataSource:a,valuePrimitive:!0})},g.fTemplate=function(e,t,a){for(var r=e[a[2]].hasOwnProperty(a[0])?"":e[a[2]],i=t,n=0,s=i.length;n<s;n++)if(i[n][a[0]]===e[a[2]]){r=i[n][a[1]];break}return r},D.doInit(),setTimeout(function(){m.isWriteable()||($(".k-grid-add").addClass("k-state-disabled"),$(".k-grid-save-changes").addClass("k-state-disabled"),$(".k-grid-cancel-changes").addClass("k-state-disabled"),$(".k-grid-add").click(_),$(".k-grid-save-changes").click(_),$(".k-grid-cancel-changes").click(_))})}])}(),function(){"use strict";angular.module("sy.Mrk.service").factory("sy.MrkSvc",["APP_CONFIG","$http",function(e,t){return{saveUserMrk:function(a,r){return t({method:"POST",url:e.domain+"/sy09Mrk/"+r,data:a})},conMrk:function(a,r){return t({method:"POST",url:e.domain+"/sy09MrkCons",headers:{"Content-Type":"application/x-www-form-urlencoded; text/plain; */*; charset=utf-8"},data:$.param(a)}).success(function(e,t,a,r){}).error(function(e,t,a,i){r.error()})}}}])}(),function(){"use strict";var e=angular.module("sy.Code",["sy.Code.controller","sy.Code.service"]);angular.module("sy.Code.controller",[]),angular.module("sy.Code.service",[]),e.config(["$stateProvider",function(e){e.state("app.syCode",{url:"/99sy/syCode?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy10Code/templates/sy.Code.tpl.html",controller:"sy.CodeCtrl",resolve:{resData:["AuthSvc","$q",function(e,t){var a=t.defer(),r={};return e.isAccess().then(function(e){r.access=e[0],a.resolve(r)}),a.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Code.controller").controller("sy.CodeCtrl",["$scope","$http","$q","$log","sy.CodeSvc","APP_CODE","$timeout","resData","Page","UtilSvc",function(e,t,a,r,i,n,s,l,o,d){var c=(e.page=new o({auth:l.access}),edt.getToday(),{"class":"table-header-cell",style:"text-align: center; font-size: 12px"}),u=function(t){var a=$.map(this.select(),function(e){var t=new Array;return t[0]=e.childNodes[0].innerText,t[1]=e.childNodes[1].innerText,t[2]=e.childNodes[4].innerText,"가능"==t[2]?t[2]="N":t[2]="Y",t}),r={NO_MNGCDHD:a[0],CD_CLS:a[1],YN_SYS:a[2]};e.syCodeVO.inquiryAll(r)},_=e.syCodeVO={boxTitle:"코드분류",searchKindList:[{name:"분류명칭",value:"defNm"},{name:"분류코드",value:"clsCd"}],searchKind:"defNm",searchNm:"",selected:null,NO_MNGCDHD:"",CD_CLS:"",messages:{noRows:"코드가 존재하지 않습니다.",loading:"코드를 가져오는 중...",requestFailed:"요청 코드를 가져오는 중 오류가 발생하였습니다."},data:[],multiSelect:!1,selectable:"multiple",enableRowSelection:!0,enableRowHeaderSelection:!1,change:u,procedureParam:"USP_SY_10CODE01_GET&L_SEARCHKIND@s|L_SEARCHNAME@s",dataSource:new kendo.data.DataSource({batch:!0,schema:{model:{fields:{NO_MNGCDHD:{},CD_CLS:{},NM_CLS:{},DC_RMK:{},YN_SYS:{},DTS_UPDATE:{}}}}}),navigatable:!0,columns:[{field:"NO_MNGCDHD",title:"",width:0,hidden:!0},{field:"CD_CLS",title:"분류코드",width:90,headerAttributes:c,attributes:{"class":"ta-l"}},{field:"NM_CLS",title:"분류명칭",width:120,headerAttributes:c,attributes:{"class":"ta-l"}},{field:"DC_RMK",title:"비고",width:100,headerAttributes:c,attributes:{"class":"ta-l"}},{field:"YN_SYS",title:"수정여부",width:80,headerAttributes:c,attributes:{"class":"ta-l"},template:'#if (YN_SYS == "Y") {# #="불가능"# #} else {# #="가능"# #} #'},{field:"DTS_UPDATE",title:"수정일시",width:120,headerAttributes:c,attributes:{"class":"ta-l"}}],collapse:function(e){this.cancelRow()},editable:!1,height:680,initLoad:function(){var e=this;e.inquiry()},inquiry:function(){var t=this,a={procedureParam:t.procedureParam,L_SEARCHKIND:t.searchKind,L_SEARCHNAME:t.searchNm};e.$emit("event:autoLoader",!1),d.getList(a).then(function(a){t.dataSource.data(a.data.results[0]),t.data=a.data.results[0];var r={NO_MNGCDHD:"",CD_CLS:"",YN_SYS:""};a.data.results[0].length>0?s(function(){t.selected=a.data.results[0][0],r.NO_MNGCDHD=t.selected.NO_MNGCDHD,r.CD_CLS=t.selected.CD_CLS,r.YN_SYS=t.selected.YN_SYS,t.inquiryAll(r)}):e.$emit("event:autoLoader",!0)})},inquiryAll:function(t){var a={procedureParam:"USP_SY_10CODE02_GET&L_NO_MNGCDHD@s|L_CD_CLS@s",L_NO_MNGCDHD:t.NO_MNGCDHD,L_CD_CLS:t.CD_CLS};d.getList(a).then(function(a){e.$broadcast("codeMng.customer:inquiry",t,a.data.results[1]),e.$broadcast("codeMng.system:inquiry",t,a.data.results[0])})}};_.initLoad()}])}(),function(){"use strict";angular.module("sy.Code.controller").controller("sy.CodeCustomCtrl",["$scope","$http","$log","$timeout","$q","sy.CodeSvc","APP_CODE","UtilSvc",function(e,t,a,r,i,n,s,l){function o(e,t){$('<input data-text-field="text" data-bind="value:'+t.field+'"/>').appendTo(e).kendoDropDownList({dataTextField:"text",dataValueField:"YN_USE",dataSource:[{text:"사용",YN_USE:"Y"},{text:"사용안함",YN_USE:"N"}]})}var d={"class":"table-header-cell",style:"text-align: center; font-size: 12px"},c=e.gridCusCodeVO={NO_MNGCDHD:"",CD_CLS:"",YN_SYS:"",deleteData:[],messages:{noRows:"사용자코드가 존재하지 않습니다.",loading:"ERP 사용자정보를 가져오는 중...",requestFailed:"요청 ERP 사용자정보를 가져오는 중 오류가 발생하였습니다.",commands:{create:"추가",save:"저장",cancel:"취소",destroy:"삭제"}},boxTitle:"사용자코드",edit:function(t){t.model.isNew()&&""==t.model.CD_CLS&&(t.model.set("YN_USE","Y"),t.model.set("NO_MNGCDHD",e.gridCusCodeVO.NO_MNGCDHD),t.model.set("CD_CLS",e.gridCusCodeVO.CD_CLS))},dataSource:new kendo.data.DataSource({transport:{read:function(e){},create:function(t){n.saveUserCode(t.data.models,"I").success(function(){e.gridCusCodeVO.init()})},update:function(t){n.saveUserCode(t.data.models,"U").success(function(){e.gridCusCodeVO.init()})},destroy:function(t){var a=i.defer();return n.saveUserCode(t.data.models,"DS").success(function(){a.resolve(),e.gridCusCodeVO.init()}),a.promise},parameterMap:function(e,t){}},batch:!0,schema:{model:{id:"CD_DEF",fields:{CD_CLS:{},CD_DEF:{validation:{cd_defvalidation:function(e){if(e.is("[name='CD_DEF']")&&0==e.val().length)return e.attr("data-cd_defvalidation-msg","구분코드를 입력해주세요."),!1;if(e.is("[name='CD_DEF']"))for(var t=$("#gridCusCodeVO").data("kendoGrid").dataSource,a=0,r=0;r<t._data.length;r++)if(e[0].value==t._data[r].CD_DEF&&a++,a>=2)return e.attr("data-cd_defvalidation-msg","구분코드가 중복됩니다."),!1;return!0}}},CD_DEF_OLD:{},NM_DEF:{validation:{required:!0}},DC_RMK1:{},DC_RMK2:{},DC_RMK3:{},DC_RMK4:{},DC_RMK5:{},YN_USE:{},DTS_UPDATE:{editable:!1}}}}}),navigatable:!0,toolbar:["create","save","cancel"],columns:[{field:"CD_DEF_OLD",hidden:!0},{field:"CD_DEF",title:"구분코드",width:100,headerAttributes:d,attributes:{"class":"ta-l"}},{field:"NM_DEF",title:"구분코드명",width:120,headerAttributes:d,attributes:{"class":"ta-l"}},{field:"DC_RMK1",title:"비고1",width:50,headerAttributes:d,attributes:{"class":"ta-l"}},{field:"DC_RMK2",title:"비고2",width:50,headerAttributes:d,attributes:{"class":"ta-l"}},{field:"DC_RMK3",title:"비고3",width:50,headerAttributes:d,attributes:{"class":"ta-l"}},{field:"DC_RMK4",title:"비고4",width:50,headerAttributes:d,attributes:{"class":"ta-l"}},{field:"DC_RMK5",title:"비고5",width:50,headerAttributes:d,attributes:{"class":"ta-l"}},{field:"YN_USE",title:"사용여부",width:70,headerAttributes:d,attributes:{"class":"ta-l"},template:'#if (YN_USE == "Y") {# #="사용"# #} else {# #="사용안함"# #} #',editor:o},{field:"DTS_UPDATE",title:"수정일시",width:120,headerAttributes:d,attributes:{"class":"ta-l"},enableCellEdit:!1},{command:["destroy"]}],collapse:function(e){this.cancelRow()},editable:!0,height:346,initLoad:function(){var t=this;e.$on("codeMng.customer:inquiry",function(e,a,r){t.NO_MNGCDHD=a.NO_MNGCDHD,t.CD_CLS=a.CD_CLS,t.YN_SYS=a.YN_SYS,t.dataSource.data(r),$("#gridCusCodeVO .k-grid-toolbar").show(),"Y"==t.YN_SYS&&$("#gridCusCodeVO .k-grid-toolbar").hide()})},init:function(){var e=this,t={procedureParam:"USP_SY_10CODE02_GET&L_NO_MNGCDHD@s|L_CD_CLS@s",L_NO_MNGCDHD:e.NO_MNGCDHD,L_CD_CLS:e.CD_CLS};l.getList(t).then(function(t){e.dataSource.data(t.data.results[1])})}};c.initLoad()}])}(),function(){"use strict";angular.module("sy.Code.controller").controller("sy.CodeSystemCtrl",["$scope",function(e){var t={"class":"table-header-cell",style:"text-align: center; font-size: 12px"},a=e.gridSysCodeVO={NO_MNGCDHD:"",CD_CLS:"",messages:{noRows:"사용자코드가 존재하지 않습니다.",loading:"ERP 사용자정보를 가져오는 중...",requestFailed:"요청 ERP 사용자정보를 가져오는 중 오류가 발생하였습니다."},boxTitle:"기초코드",dataSource:new kendo.data.DataSource({batch:!0,schema:{model:{fields:{NM_DEF:{},DC_RMK1:{},DC_RMK2:{},DC_RMK3:{},DC_RMK4:{},DC_RMK5:{},YN_USE:{},DTS_UPDATE:{}}}}}),navigatable:!0,columns:[{field:"NM_DEF",title:"구분코드명",width:80,headerAttributes:t,attributes:{"class":"ta-l"}},{field:"DC_RMK1",title:"비고1",width:40,headerAttributes:t,attributes:{"class":"ta-l"}},{field:"DC_RMK2",title:"비고2",width:40,headerAttributes:t,attributes:{"class":"ta-l"}},{field:"DC_RMK3",title:"비고3",width:40,headerAttributes:t,attributes:{"class":"ta-l"}},{field:"DC_RMK4",title:"비고4",width:40,headerAttributes:t,attributes:{"class":"ta-l"}},{field:"DC_RMK5",title:"비고5",width:40,headerAttributes:t,attributes:{"class":"ta-l"}},{field:"YN_USE",title:"사용여부",width:50,headerAttributes:t,attributes:{"class":"ta-l"},cellFilter:"ynUse",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownValueLabel:"YN_USE",editDropdownOptionsArray:[{id:"Y",YN_USE:"사용"},{id:"N",YN_USE:"사용안함"}],template:'#if (YN_USE == "Y") {# #="사용"# #} else {# #="사용안함"# #} #'},{field:"DTS_UPDATE",title:"수정일시",width:100,headerAttributes:t,attributes:{"class":"ta-l"},enableCellEdit:!1}],collapse:function(e){this.cancelRow()},editable:!1,height:346,initLoad:function(){var t=this;e.$on("codeMng.system:inquiry",function(e,a,r){t.NO_MNGCDHD=a.NO_MNGCDHD,t.CD_CLS=a.CD_CLS,t.dataSource.data(r)})}};a.initLoad()}])}(),function(){"use strict";angular.module("sy.Code.service").factory("sy.CodeSvc",["APP_CONFIG","$http",function(e,t){return{getCodeTypeList:function(){return t({method:"GET",url:e.domain+"/codetype"})},getSubGroupcodeList:function(a){return t({method:"GET",url:e.domain+"/code/"+a.cd+"?group="+a.group})},saveUserCode:function(a,r){return t({method:"POST",url:e.domain+"/code/"+r,data:a})},getGroupCode:function(a){return t({method:"GET",url:e.domain+"/code?"+$.param(a)})},getUserCode:function(a){return t({method:"GET",url:e.domain+"/code?"+$.param(a)})},getSystemCode:function(a){return t({method:"GET",url:e.domain+"/code?"+$.param(a)})},getSubcodeList:function(a){return t({method:"GET",url:e.domain+"/code/"+a.cd})},getDeptOrUserCdList:function(a){var r=e.domain+"/svCode/"+a.type,i="";return"user"===a.type&&a.mgrDept&&(i="&"+edt.makeGetParam(a.mgrDept,"mgrDept"),delete a.mgrDept),delete a.type,r=r+"?"+$.param(a)+i,t({method:"GET",url:r})}}}])}(),function(){"use strict";var e=angular.module("sy.Dept",["sy.Dept.controller","sy.Dept.service"]);angular.module("sy.Dept.controller",[]),angular.module("sy.Dept.service",[]),e.config(["$stateProvider",function(e){e.state("app.syDept",{url:"/99sy/syDept?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy12Dept/templates/sy.Dept.tpl.html",controller:"sy.DeptCtrl",resolve:{resData:["AuthSvc","sy.DeptSvc","sy.CodeSvc","APP_CODE","$q",function(e,t,a,r,i){var n=i.defer(),s={};return e.isAccess().then(function(e){s.access=e[0],i.all([a.getSubcodeList({cd:"SY_000023"})]).then(function(e){s.workCodeList=e[0].data,n.resolve(s)})}),n.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Dept.controller",["kendo.directives"]).controller("sy.DeptCtrl",["$scope","$q","sy.CodeSvc","sy.DeptSvc","APP_CODE","resData","Page","$state","MenuSvc","$location",function(e,t,a,r,i,n,s,l,o,d){function c(e,t){return e+="",e.length>=t?e:new Array(t-e.length+1).join("0")+e}var u=(e.page=new s({auth:n.access}),edt.getToday(),o.getNO_M(l.current.name),e.syDeptVO={parentNum:"",boxTitle:"조직도",isValid:function(e){var t,a,r,i=/^[가-힣\w\s_(),&@'#\-:;\/*{}[\]<>]{1,32}$/,n=/^[\d]+$/;for(t=0,a=e.length;t<a;t+=1){if(r=e[t],!r.NM_DEPT)return{state:!1,msg:"[필수] 부서명은 필수 입력값입니다."};if(!i.test(r.NM_DEPT))return{state:!1,msg:"[형식] 부서명은 유효하지 않은 형식입니다."};if(!r.CD_OCC)return{state:!1,msg:"[필수] 직군은 필수 입력값입니다."};if(!n.test(r.CD_OCC))return{state:!1,msg:"[형식] 직군은 유효하지 않은 형식입니다."}}return{state:!0,msg:"체크완료"}},makeParam:function(e){var t={STATE:e._state,NM_DEPT:e.NM_DEPT,NO_HRNKDEPT:e.NO_HRNKDEPT,CD_OCC:e.CD_OCC};return angular.isUndefined(e.NO_DEPT)||(t.NO_DEPT=e.NO_DEPT),[t]},inquiry:function(e){var a=this;t.all([r.getDepart({search:"all"})]).then(function(t){a.data=t[0].data,e.success(a.data)})},saveProcess:function(a,i){var n=this,s=n.makeParam(a),l=n.isValid(s),o=t.defer();return l.state?r.save(s).error(function(t,a,r,i){console.log("error",t,a,r,i),o.resolve(),e.dataSource.read()}).then(function(){o.resolve(),e.dataSource.read()}):(alert(l.msg),o.reject()),o.promise},save:function(e,t,a){for(var r=this,i=0;i<e.length;i++){var n="SYDE";n+=c(e[i].HCD,8);var s={_state:t,NO_DEPT:e[i].NO_DEPT,NM_DEPT:e[i].NM_DEPT,NO_HRNKDEPT:n,CD_OCC:e[i].CD_OCC};s.NO_DEPT&&""!==s.NO_DEPT||delete s.NO_DEPT,r.saveProcess(s,a)}},workGroupDropDownEditor:function(e,t){$('<input data-bind="value:'+t.field+'"/>').appendTo(e).kendoDropDownList({dataTextField:"NM_DEF",dataValueField:"CD_DEF",dataSource:n.workCodeList})}});e.dataSource=new kendo.data.TreeListDataSource({batch:!0,transport:{read:function(e){u.inquiry(e)},create:function(e){var t=e.data.models;u.save(t,"I",e)},update:function(e){var t=e.data.models;u.save(t,"U",e)},destroy:function(e){var t=e.data.models;u.save(t,"D",e)}},schema:{model:{id:"CD",parentId:"HCD",fields:{CD:{type:"number"},HCD:{type:"number"},NO_DEPT:{type:"string",editable:!1,nullable:!1},NO_HRNKDEPT:{type:"string",editable:!1,nullable:!0},NM_DEPT:{validation:{required:!0}},CD_OCC:{type:"string",validation:{required:!0}},NM_CD_OCC:{type:"string",validation:{required:!0}},CNT_EMP:{type:"number",editable:!1,nullable:!0}},expanded:!0}}}),e.treelistOptions={messages:{noRows:"부서가 존재하지 않습니다.",loading:"부서리스트를 가져오는 중...",requestFailed:"요청 부서리스트를 가져오는 중 오류가 발생하였습니다.",retry:"갱신",commands:{create:"등록",createchild:"하위부서추가",edit:"수정",update:"수정",canceledit:"취소",destroy:"삭제"}},columns:[{field:"NM_DEPT",title:"부서명",width:"280px",editable:!0,expandable:!0,template:$("#departTemplate").html(),attributes:{style:"text-align: left"},headerAttributes:{style:"text-align: center"}},{field:"CD_OCC",title:"직군",width:"150px",template:$("#workGroupNameTemplate").html(),editor:u.workGroupDropDownEditor,attributes:{style:"text-align: center"},headerAttributes:{style:"text-align: center"}},{field:"CNT_EMP",title:"직원수",width:"120px",template:$("#cntEmpTemplate").html(),editable:!1,attributes:{style:"text-align: right"},headerAttributes:{style:"text-align: center"}},{command:["createchild","edit","destroy"],attributes:{style:"text-align: left"}}],remove:function(e){var t="삭제시 하위부서가 모두 삭제되며 복구가 불가능합니다.\n삭제하시겠습니까?";confirm(t)||(e.preventDefault(),this.cancelRow())},collapse:function(e){this.cancelRow()},dragend:function(t){t&&e.dataSource.sync()}}}])}(),function(){"use strict";angular.module("sy.Dept.service").factory("sy.DeptSvc",["APP_CONFIG","$http",function(e,t){return{getMngDepart:function(a){var r=e.domain+"/kindDept";return a&&(r+="?"+$.param(a)),t({method:"GET",url:r})},getDepart:function(a){var r=e.domain+"/sy07UserDept";return angular.isObject(a)&&(r+="?"+$.param(a)),t({method:"GET",url:r})},getLowDeptList:function(a){var r=e.domain+"dept?";return a.USER_CD?(delete a.cd,r+=$.param(a)):r+="mgr_cd="+a.mgr_cd,t({method:"GET",url:r})},save:function(a){return t({method:"POST",url:e.domain+"/sy12Dept",data:a})}}}])}(),function(){"use strict";var e=angular.module("sy.Menu",["sy.Menu.controller","sy.Menu.service"]);angular.module("sy.Menu.controller",[]),angular.module("sy.Menu.service",[]),e.config(["$stateProvider",function(e){e.state("app.syMenu",{url:"/99sy/syMenu?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy13Menu/templates/sy.Menu.tpl.html",controller:"sy.MenuCtrl",
resolve:{resData:["AuthSvc","$q",function(e,t){var a=t.defer(),r={};return e.isAccess().then(function(e){r.access=e[0],a.resolve(r)}),a.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Menu.controller").controller("sy.MenuCtrl",["$scope","sy.MenuSvc","resData","Page","sy.AtrtSvc",function(e,t,a,r,i){var n=(e.page=new r({auth:a.access}),edt.getToday(),e.syMenuVO={boxTitle:"메뉴관리"});n.options={data:[],colDefs:[{field:"POS",displayName:"메뉴코드",width:180},{field:"NM_M",displayName:"메뉴이름",width:300,type:"tree"},{field:"ID_CMP",displayName:"URL",width:300},{field:"YN_USE",displayName:"사용여부",width:100,className:"ta-c",filter:"ynUse"},{field:"YN_EXE",displayName:"실행여부",width:100,className:"ta-c",filter:"ynExe"},{field:"DTS_UPDATE",displayName:"수정일시",width:140,className:"ta-c"}],primaryName:"POS",parentName:"PARENT",height:693,onRegisterApi:function(e){n.treeApi=e}},n.initLoad=function(){var e=this;e.init()},n.init=function(){this.inquiry()},n.makeGetParam=function(){},n.inquiry=function(){var e=this;t.getMenuList().then(function(t){e.options.data=t.data})},n.hasShowData=function(){return 0===this.treeApi.showData.length},n.toggleAll=function(e){this.treeApi.toggleAll(e)},n.initLoad()}])}(),function(){"use strict";angular.module("sy.Menu.service").factory("sy.MenuSvc",["APP_CONFIG","$http",function(e,t){return{getMenuList:function(){return t({method:"GET",url:e.domain+"/sy13Menu"})}}}])}(),function(){"use strict";var e=angular.module("sy.Notice",["sy.Notice.controller","sy.Notice.service"]);angular.module("sy.Notice.controller",[]),angular.module("sy.Notice.service",[]),e.config(["$stateProvider",function(e){e.state("app.syNotice",{url:"/99sy/syNotice?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy14Notice/templates/sy.Notice.tpl.html",controller:"sy.NoticeCtrl",resolve:{resData:["AuthSvc","$q",function(e,t){var a=t.defer(),r={};return e.isAccess().then(function(e){r.access=e[0],a.resolve(r)}),a.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Notice.controller").controller("sy.NoticeCtrl",["$scope","$window","$http","$q","$log","sy.NoticeSvc","APP_CODE","$timeout","resData","Page","UtilSvc","APP_CONFIG",function(e,t,a,r,i,n,s,l,o,d,c,u){var _=(e.page=new d({auth:o.access}),edt.getToday());e.userInfo=JSON.parse(t.localStorage.getItem("USER"));var m=(function(){var e={procedureParam:"MarketManager.USP_SY_10CODE02_GET&lnomngcdhd@s|lcdcls@s",lnomngcdhd:"SYCH00014",lcdcls:"SY_000014"};c.getList(e).then(function(e){e.data.results[0].length>=1&&(m.noticeCdVO=e.data.results[0])})}(),e.noticeDataVO={boxTitle:"검색",setting:{id:"CD_DEF",name:"NM_DEF",maxNames:2},datesetting:{dateType:"market",buttonList:["current","1Day","1Week","1Month"],selected:"current",period:{start:angular.copy(_),end:angular.copy(_)}},contentText:{value:"",focus:!1},noticeCdModel:"*",noticeCdVO:[],dataTotal:0,resetAtGrd:""});m.initLoad=function(){l(function(){var t=c.grid.getInquiryParam();t&&(m.contentText.value=t.SEARCH_,m.noticeCdModel=t.ARR_CD_NO,m.noticeCdVO.setSelectNames=t.ARR_CD_NO_SELECT_INDEX,m.datesetting.period.start=t.START_DATE,m.datesetting.period.end=t.END_DATE,e.nkg.dataSource.read())},1e3)},m.inQuiry=function(){var t=this;if(null===t.noticeCdModel||""===t.noticeCdModel)return void alert("공지구분을 입력해 주세요.");e.nkg.dataSource.read();var a={SEARCH_:m.contentText.value,ARR_CD_NO:m.noticeCdModel,ARR_CD_NO_SELECT_INDEX:m.noticeCdVO.allSelectNames,START_DATE:m.datesetting.period.start,END_DATE:m.datesetting.period.end};c.grid.setInquiryParam(a)},m.inIt=function(){var t=this;t.contentText.value="",t.noticeCdVO.bReset=!0,t.datesetting.selected="current",t.dataTotal=0,t.resetAtGrd=e.nkg,t.resetAtGrd.dataSource.data([])},m.isOpen=function(t){t?(e.nkg.wrapper.height(657),e.nkg.resize(),p.dataSource.pageSize(20)):(e.nkg.wrapper.height(798),e.nkg.resize(),p.dataSource.pageSize(24))},m.afterSaveQuery=function(t){var a=this;a.writeText.value=t.NO_WRITE,a.noticeCdModel=t.CD_NOTICE,e.nkg.dataSource.read()},$("#divGrd").delegate("tbody>tr","dblclick",function(){$("#divGrd").data("kendoGrid").editRow($(this)),$($("#editor").data().kendoEditor.body).attr("contenteditable",!1)});var p=e.gridNoticeVO={autoBind:!1,messages:{requestFailed:"공지사항정보를 가져오는 중 오류가 발생하였습니다.",noRecords:"검색된 데이터가 없습니다."},boxTitle:"공지 리스트",url:u.domain+"/ut05FileUpload",sortable:!0,pageable:{messages:c.gridPageableMessages},noRecords:!0,currentFileList:[],dataSource:new kendo.data.DataSource({transport:{read:function(e){var t={procedureParam:"USP_SY_14NOTICE01_GET&SEARCH_@s|ARR_CD_NO@s|NOTI_TO@s|NOTI_FROM@s",SEARCH_:m.contentText.value,ARR_CD_NO:m.noticeCdModel,NOTI_TO:new Date(m.datesetting.period.start.y,m.datesetting.period.start.m-1,m.datesetting.period.start.d,"00","00","00").dateFormat("YmdHis"),NOTI_FROM:new Date(m.datesetting.period.end.y,m.datesetting.period.end.m-1,m.datesetting.period.end.d,23,59,59).dateFormat("YmdHis")};c.getList(t).then(function(t){m.dataTotal=t.data.results[0].length,e.success(t.data.results[0])})}},pageSize:11,batch:!0,schema:{model:{id:"NO_NOTICE",fields:{ROW_NUM:{type:"string",editable:!1,nullable:!1},NO_C:{type:"string",editable:!1,nullable:!1},CD_NOTICE:{type:"string",defaultValue:"001",nullable:!1},NM_SUBJECT:{type:"string",editable:!0,nullable:!1},DC_HTMLCONTENT:{type:"string",editable:!0,nullable:!0},DC_CONTENT:{type:"string",editable:!0,nullable:!1},DTS_INSERT:{type:"string",editable:!1,nullable:!1},NO_WRITE:{type:"string",defaultValue:e.userInfo.NM_EMP,nullable:!1}}}}}),selectable:"row",columns:[{field:"ROW_NUM",title:"번호",width:40,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 10px"}},{field:"CD_NOTICE",title:"공지구분",width:70,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 10px"}},{field:"NM_SUBJECT",title:"제목",width:250,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 10px"}},{field:"DC_HTMLCONTENT",title:"공지내용",headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 10px"}},{field:"DTS_INSERT",title:"공지일시",width:150,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 10px"}},{field:"NO_WRITE",title:"작성자",width:100,headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 10px"}}],editable:{mode:"popup",window:{title:"공지 사항"},template:kendo.template($.trim($("#ma_notice_popup_template").html()))},edit:function(e){e.container.find(".k-button.k-grid-update").hide(),e.container.find(".k-button.k-grid-cancel").text("확인");var t=this,a="",r={procedureParam:"USP_SY_14NOTICEFILES01_GET&L_CD_REF1@s",L_CD_REF1:e.model.NO_NOTICE};c.getList(r).then(function(e){t.currentFileList=e.data.results[0],angular.forEach(t.currentFileList,function(e){a+="<a href='"+p.url+"?NO_AT="+e.NO_AT+"&CD_AT="+e.CD_AT+"' download="+e.NM_FILE+"> "+e.NM_FILE+" </a></br>"}),$("#fileInfo").append(a)})},resizable:!0,rowTemplate:kendo.template($.trim($("#ma_notice_template").html())),height:657};m.initLoad()}])}(),function(){"use strict";angular.module("sy.Notice.service").factory("sy.NoticeSvc",["APP_CONFIG","$http",function(e,t){return{noticeInsert:function(a){return t({method:"POST",url:e.domain+"/notice/noticeInsert",data:a}).success(function(e,t,a,r){return""===e?void alert("저장 실패하였습니다.!! 연구소에 문의 부탁드립니다."):void alert("저장 되었습니다.")}).error(function(e,t,a,r){console.log("error",e,t,a,r)})},noticeUpdate:function(a){return t({method:"PUT",url:e.domain+"/notice/noticeUpdate",data:a}).success(function(e,t,a,r){if("1"!==e)return void alert("수정 실패하였습니다.!! 연구소에 문의 부탁드립니다.")}).error(function(e,t,a,r){console.log("error",e,t,a,r)})},noticeDelete:function(a){return t({method:"DELETE",url:e.domain+"/notice/noticeDelete",data:a}).success(function(e,t,a,r){if("1"!==e)return void alert("삭제 실패하였습니다.!! 연구소에 문의 부탁드립니다.")}).error(function(e,t,a,r){console.log("error",e,t,a,r)})}}}])}(),function(){"use strict";var e=angular.module("sy.Pars",["sy.Pars.controller","sy.Pars.service"]);angular.module("sy.Pars.controller",[]),angular.module("sy.Pars.service",[]),e.config(["$stateProvider",function(e){e.state("app.syPars",{url:"/99sy/syPars?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy15Pars/templates/sy.Pars.tpl.html",controller:"sy.ParsCtrl",resolve:{resData:["AuthSvc","$q","UtilSvc",function(e,t,a){var r=t.defer(),i={};return e.isAccess().then(function(e){i.access=e[0],a.csMrkList().then(function(e){i.csMrkDataSource=e.data,r.resolve(i)})}),r.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Pars.controller").controller("sy.ParsCtrl",["$scope","$cookieStore","$http","$q","$log","$state","sy.ParsSvc","sy.CodeSvc","APP_CODE","$timeout","resData","Page","UtilSvc","MenuSvc",function(e,t,a,r,i,n,s,l,o,d,c,u,_,m){var p=e.page=new u({auth:c.access}),f=(edt.getToday(),m.getNO_M(n.current.name),e.mrkName={boxTitle:"택배사관리",mngMrkDs:{autoBind:!0,dataTextField:"NM_DEF",dataValueField:"CD_DEF",dataSource:c.csMrkDataSource,valuePrimitive:!0},mngMrkMd:0!=c.csMrkDataSource.length?c.csMrkDataSource[0].CD_DEF:""}),D=e.sy15ParsVO={initLoad:function(t){t&&angular.forEach(e.sy15ParsGridVO,function(t,a){t=e.sy15ParsGridVO.addCommonGridVO(t,a),d(function(){if(!p.isWriteable())for(var e=0;e<3;e++){var t=$("#grid"+e).data("kendoGrid"),a={editable:!1};t.setOptions(a),t.hideColumn(1),$("#grid"+e+" .k-grid-toolbar").hide()}})})}};D.search=function(e){for(var t=!1,a=0;a<3;a++){var r=$("#grid"+a).data("kendoGrid").dataSource;if(r.hasChanges()){if(confirm("수정된 사항이 있습니다.\n저장하시겠습니까?")){t=!0;break}for(var i=0;i<3;i++){var n=$("#grid"+i).data("kendoGrid");n.dataSource.transport.read()}return}}if(t)for(var a=0;a<3;a++){var n=$("#grid"+a).data("kendoGrid").dataSource;n.sync()}else for(var i=0;i<3;i++){var n=$("#grid"+i).data("kendoGrid");n.dataSource.transport.read()}},D.inIt=function(){for(var e=this,t=0;t<3;t++){var a=$("#grid"+t).data("kendoGrid").dataSource;if(a.hasChanges()){if(!confirm("수정된 사항이 있습니다.\n초기화 하시겠습니까?"))return;a.cancelChanges()}}0!=c.csMrkDataSource.length&&(f.mngMrkMd=c.csMrkDataSource[0].CD_DEF),e.search()},D.dropDownEditor=function(e,t,a,r){$("<input required name="+t.field+' data-bind="value:'+t.field+'" />').appendTo(e).kendoDropDownList({autoBind:!0,dataTextField:r[0],dataValueField:r[1],dataSource:a,valuePrimitive:!0})},D.fTemplate=function(e,t,a){for(var r=e[a[2]].hasOwnProperty(a[0])?"":e[a[2]],i=t,n=0,s=i.length;n<s;n++)if(i[n][a[0]]===e[a[2]]){r=i[n][a[1]];break}return r};var C=e.sy15ParsGridVO=[{boxTitle:"발송"},{boxTitle:"회수"},{boxTitle:"재발송"}];C.addCommonGridVO=function(t,a){var i=t;return i.iIndex=a,i.messages={noRows:"정보가 존재하지 않습니다.",loading:"정보를 가져오는 중...",requestFailed:"정보를 가져오는 중 오류가 발생하였습니다.",retry:"갱신",commands:{create:"추가",destroy:"삭제",save:"저장",cancel:"취소"}},i.navigatable=!0,i.height=642,i.dataSource=new kendo.data.DataSource({autoBind:!1,batch:!0,ParsCodeList:[],transport:{read:function(t){var a=i,r={procedureParam:"MarketManager.USP_SY_15PARS01_GET&NO_MRK@s|L_FLAG@s",NO_MRK:e.mrkName.mngMrkMd,L_FLAG:String(a.iIndex)};_.getList(r).then(function(e){a.ParsCodeList=e.data.results[1],a.dataSource.data(e.data.results[0])})},create:function(e){var t=this;s.savePars(e.data.models,"I").success(function(){t.read(e)})},update:function(e){var t=this;s.savePars(e.data.models,"U").success(function(){t.read(e)})},destroy:function(e){var t=this,a=r.defer();return s.savePars(e.data.models,"D").success(function(){t.read(e),a.resolve()}),a.promise},parameterMap:function(e,t){if("read"!==t&&e.models)return{models:kendo.stringify(e.models)}}},schema:{model:{id:"CD_DEF",fields:{CD_CLS:{type:"string"},CD_DEF:{type:"string"},DC_RMK1:{type:"string"},DC_RMK2:{type:"string",validation:{cd_parsvalidation:function(e){if(e.is("[name='DC_RMK2']")&&0==e.val().length)return e.attr("data-cd_parsvalidation-msg","택배사를 선택해주세요."),!1;if(e.is("[name='DC_RMK2']"))for(var t=$("#grid"+i.iIndex).data("kendoGrid").dataSource,a=0,r=0;r<t._data.length;r++)if(e[0].value==t._data[r].DC_RMK2&&a++,a>=2)return e.attr("data-cd_parsvalidation-msg","택배사가 중복됩니다."),!1;return!0}}},DC_RMK3:{type:"string"}}}}}),i.editable={confirmation:!1},i.toolbar=["create","save","cancel"],i.columns=[{field:"DC_RMK2",title:"택배사",width:300,cellClass:"ta-c",headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px"},editor:function(e,t){D.dropDownEditor(e,t,i.ParsCodeList,["NM_DEF","CD_DEF"])},template:function(e){return D.fTemplate(e,i.ParsCodeList,["CD_DEF","NM_DEF","DC_RMK2"])}},{command:[{name:"삭제",imageClass:"k-icon k-i-close",click:function(e){if(e.preventDefault(),confirm("삭제 하시겠습니까?\n삭제 후 저장버튼을 클릭하셔야 삭제 됩니다.")){var t=$("#"+e.delegateTarget.id).data("kendoGrid").dataSource,a=this.dataItem($(e.target).closest("tr"));t.remove(a)}}}],minwidth:10}],i.edit=function(t){var a=this,r=i;if(0==r.ParsCodeList.length){var n=$("#grid"+r.iIndex).data("kendoGrid").dataSource;return n.cancelChanges(),void alert("관리마켓을 선택후 검색을 눌러주세요.")}""==a._data[0].DC_RMK1&&(a._data[0].DC_RMK1=e.mrkName.mngMrkMd,"발송"==a.options.boxTitle?a._data[0].DC_RMK3="001":"회수"==a.options.boxTitle?a._data[0].DC_RMK3="002":"재발송"==a.options.boxTitle&&(a._data[0].DC_RMK3="003"))},i},e.sy15ParsVO.initLoad(!0)}])}(),function(){"use strict";angular.module("sy.Pars.service").factory("sy.ParsSvc",["APP_CONFIG","$http",function(e,t){return{savePars:function(a,r){return t({method:"POST",url:e.domain+"/sy15Pars/"+r,data:a})}}}])}(),function(){"use strict";var e=angular.module("sy.Qa",["sy.Qa.controller","sy.Qa.service"]);angular.module("sy.Qa.controller",[]),angular.module("sy.Qa.service",[]),e.config(["$stateProvider",function(e){e.state("app.syQa",{url:"/99sy/syQa?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy16Qa/templates/sy.Qa.tpl.html",controller:"sy.QaCtrl",resolve:{resData:["AuthSvc","$q",function(e,t){var a=t.defer(),r={};return e.isAccess().then(function(e){r.access=e[0],a.resolve(r)}),a.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Qa.controller").controller("sy.QaCtrl",["$compile","$scope","$window","$http","$q","$log","sy.QaSvc","APP_CODE","$timeout","resData","Page","UtilSvc","APP_CONFIG","APP_SA_MODEL",function(t,a,r,i,n,s,l,o,d,c,u,_,m,p){var f=a.page=new u({auth:c.access}),D=edt.getToday(),C=a.syQaDataVO={userInfo:JSON.parse(r.localStorage.getItem("USER")),boxTitle:"검색",setting:{id:"CD_DEF",name:"NM_DEF",maxNames:2},datesetting:{dateType:"market",buttonList:["current","1Day","1Week","1Month"],selected:"current",period:{start:angular.copy(D),end:angular.copy(D)}},contentText:{value:"",focus:!1},answerStatusModel:"*",answerStatusBind:[],customOptions:{dataSource:[],dataTextField:"NM_DEF",dataValueField:"CD_DEF",valuePrimitive:!0},fileMngDataVO:{CD_AT:"009",limitCnt:5,currentDataList:[]},fileSlrDataVO:{CD_AT:"008",limitCnt:5,currentDataList:[]},fileDtLst:"",dataTotal:0,resetAtGrd:""};C.asrStsBind=function(){var e=this,t={lnomngcdhd:"SYCH00091",lcdcls:"SY_000031"};_.getCommonCodeList(t).then(function(t){t.data.length>=1&&(e.answerStatusBind=t.data,e.customOptions.dataSource=t.data)},function(e){e.error([])})},C.inQuiry=function(){g.dataSource.read();var e={procedureParam:"USP_SY_16QA_GET&L_CONT@s|L_CD_ANSSTAT@s|L_START_DATE@s|L_END_DATE@s",L_CONT:C.contentText.value,L_CD_ANSSTAT:C.answerStatusModel,L_CD_ANSSTAT_INDEX:C.answerStatusBind.allSelectNames,L_START_DATE:C.datesetting.period.start,L_END_DATE:C.datesetting.period.end};_.grid.setInquiryParam(e),setTimeout(function(){f.isWriteable()||($(".k-grid-delete").addClass("k-state-disabled"),$(".k-grid-delete").click(stopEvent),$(".k-grid-연동체크").addClass("k-state-disabled"),$(".k-grid-연동체크").click(stopEvent))})},C.inIt=function(){var e=this;e.contentText.value="",e.answerStatusModel=["*"],e.allSelectTargetModel=[],e.fileSlrDataVO.currentDataList=[],e.fileMngDataVO.currentDataList=[],e.answerStatusBind.bReset=!0,d(function(){angular.element(".frm-group").find("button:eq(0)").triggerHandler("click"),angular.element(".frm-group").find("button:eq(2)").triggerHandler("click")},0),e.dataTotal=0,e.resetAtGrd=a.syqakg,e.resetAtGrd.dataSource.data([])},C.isOpen=function(e){e?(a.syqakg.wrapper.height(657),a.syqakg.resize(),g.dataSource.pageSize(20)):(a.syqakg.wrapper.height(798),a.syqakg.resize(),g.dataSource.pageSize(24))},C.columnProc=function(){var e=[p.ROW_CHK,p.ROW_NUM,p.DC_INQTITLE,p.DC_INQCTT,p.DTS_INQREG,p.NO_INSERT,p.DC_ANSCTT,p.CD_ANSSTAT],t={headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px; vertical-align:middle;"}},a=[];e[0].title="선택",e[5].title="작성자";for(var r=0;r<e.length;r++){var i=angular.extend(t,e[r]);a.push(angular.copy(i))}return a}(),C.kEditor={noNotice:"",path:"",tools:["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent"],imageBrowser:{messages:{dropFilesHere:"드래그 한 파일을 여기에 놓아 주세요.",empty:"비었음",uploadFile:"그림 파일 업로드"},change:function(t){var a=e.sender._selectedItem();console.log("selectedImage",a)},transport:{read:function(e){var t={procedureParam:"MarketManager.USP_MA_05NOTICE_FILELIST_GET&no@s",no:noticeDataVO.kEditor.noNotice};_.getList(t).then(function(t){t.data.results[0].length>=1?e.success(t.data.results[0]):e.success([])})},destroy:{url:m.domain+"/ut05FileUpload",type:"DELETE"},uploadUrl:m.domain+"/ut05FileUpload",thumbnailUrl:function(e,t){console.log(e,t)},imageUrl:function(e){}}}},angular.element(document.querySelector("#divSyQaGrd")).delegate("tbody>tr","dblclick",function(e){var t=a.syqakg;t.dataItem($(e.currentTarget).closest("tr"));t.editRow($(e.target).closest("tr"))});var g=a.gridSyQaVO={autoBind:!1,messages:{requestFailed:"정보를 가져오는 중 오류가 발생하였습니다.",noRecords:"검색된 데이터가 없습니다."},boxTitle:"QA 리스트",fileUrl:m.domain+"/ut05FileUpload",sortable:!0,pageable:{messages:_.gridPageableMessages},toolbar:[{template:kendo.template($.trim($("#sy-qa-toolbar-template").html()))}],noRecords:!0,currentFileList:[],dataSource:new kendo.data.DataSource({transport:{read:function(e){var t={procedureParam:"USP_SY_16QA_GET&L_CONT@s|L_CD_ANSSTAT@s|L_START_DATE@s|L_END_DATE@s",L_CONT:C.contentText.value,L_CD_ANSSTAT:C.answerStatusModel,L_START_DATE:new Date(C.datesetting.period.start.y,C.datesetting.period.start.m-1,C.datesetting.period.start.d).dateFormat("Ymd"),L_END_DATE:new Date(C.datesetting.period.end.y,C.datesetting.period.end.m-1,C.datesetting.period.end.d).dateFormat("Ymd")};_.getList(t).then(function(t){t.data.results[0].length>=1?(C.dataTotal=t.data.results[0].length,e.success(t.data.results[0])):e.error()})},create:function(e){var t=n.defer();return l.qaSave(e.data.models,"I").then(function(a){a.data?(C.fileSlrDataVO.dirty?(C.fileSlrDataVO.CD_REF1=a.data,C.fileSlrDataVO.doUpload(function(){alert("저장 되었습니다.")},function(){alert("첨부파일업로드 실패하였습니다.")})):alert("저장 되었습니다."),C.inQuiry()):(e.error([]),alert(a.data),alert("저장 실패 하였습니다 새 글을 써주세요.")),t.resolve()},function(t){e.error([])}),C.fileSlrDataVO.currentDataList=[],t.promise},update:function(e){var t=n.defer();return l.qaSave(e.data.models,"U").then(function(a){a.data?(C.fileSlrDataVO.dirty?(C.fileSlrDataVO.CD_REF1=a.data,C.fileSlrDataVO.doUpload(function(){alert("저장 되었습니다.")},function(){alert("첨부파일업로드 실패하였습니다.")})):alert("저장 되었습니다."),C.inQuiry()):(e.error([]),alert(a.data),alert("저장 실패 하였습니다 새 글을 써주세요.")),t.resolve()},function(t){e.error([])}),C.fileSlrDataVO.currentDataList=[],C.fileMngDataVO.currentDataList=[],t.promise}},pageSize:11,batch:!0,schema:{model:{id:"NO_QA",fields:{ROW_NUM:{type:"number",editable:!1,nullable:!1},NO_C:{type:"string",editable:!1,nullable:!1},NO_QA:{type:"string",editable:!1,nullable:!1},CD_BCL:{type:"string",editable:!1,nullable:!1},CD_MCL:{type:"string",editable:!1,nullable:!1},CD_SCL:{type:"string",editable:!1,nullable:!1},DC_INQTITLE:{type:"string",editable:!0,nullable:!1,validation:{dc_inqtitlevalidation:function(e){if(e.is("[name='DC_INQTITLE']")&&!e.val())return e.attr("data-dc_inqtitlevalidation-msg","문의 제목을 입력해 주세요."),!1;if(e.is("[name='DC_INQTITLE']")&&e.val()){var t=_.removeHtmlTag(e.val().trim()).length;if(t>100||t<10)return e.attr("data-dc_inqtitlevalidation-msg","답변제목을 10자 이상 100자 이내로 입력해 주세요."),!1}return!0}}},DC_HTMLINQCTT:{type:"string",editable:!0,nullable:!1,validation:{dc_htmllinqcttvalidation:function(e){if(e.is("[name='DC_HTMLINQCTT']")&&!e.val())return e.attr("data-dc_htmllinqcttvalidation-msg","문의내용을 입력해 주세요."),!1;if(e.is("[name='DC_HTMLINQCTT']")&&e.val()){var t=_.removeHtmlTag(e.data("kendoEditor").value().trim()).length;if(t>2e3||t<10)return e.attr("data-dc_htmllinqcttvalidation-msg","문의내용을 10자 이상 2000자 이내로 입력해 주세요."),!1}return!0}}},DC_INQCTT:{type:"string",editable:!0,nullable:!1},NO_INQPHNE:{type:"string",editable:!0,nullable:!1},DC_INQEMI:{type:"string",editable:!0,nullable:!1,validation:{dc_inqemivalidation:function(e){return e.is("[name='DC_INQEMI']")&&!e.val()?(e.attr("data-dc_inqemivalidation-msg","이메일을 입력해 주세요."),!1):!(e.is("[name='DC_INQEMI']")&&e.val()&&!/^[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[@]{1}[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[.]{1}[A-Za-z]{2,5}$/.test(e.val()))||(e.attr("data-dc_inqemivalidation-msg","이메일 형식이 맞지않습니다."),!1)}}},NO_INQCEPH:{type:"string",editable:!0,nullable:!1},NM_ANS:{type:"string",editable:!1,nullable:!1},DC_HTMLANSCTT:{type:"string",editable:!0,nullable:!1},DC_ANSCTT:{type:"string",editable:!0,nullable:!1},DTS_ANSREG:{type:"string",editable:!1,nullable:!1},DTS_ANSCFM:{type:"string",editable:!1,nullable:!1},NM_C:{type:"string",editable:!1,nullable:!1},DTS_INQREG:{type:"string",editable:!1,nullable:!1},NO_INSERT:{type:"string",editable:!1,nullable:!1},NM_FILE:{type:"string",editable:!0,nullable:!1},M_NM_FILE:{type:"string",editable:!0,nullable:!1},CD_ANSSTAT:{type:"string",editable:!0,nullable:!1}}}}}),columns:C.columnProc,editable:{mode:"popup",window:{title:"공지 사항"},template:kendo.template($.trim($("#sy_qa_popup_template").html()))},edit:function(e){if($($("#k-qa-medtr").data().kendoEditor.body).attr("contenteditable",!1),e.model.isNew())$(".k-grid-update").text("저장"),$(".k-grid-cancel").text("취소"),$(".k-window-title").text("QA 등록"),e.model.set("NO_INQCEPH",C.userInfo.NO_CEPH),e.container.find("input[name=DC_INQEMI]").val(C.userInfo.DC_EMIADDR).trigger("change"),e.model.set("DC_INQEMI",C.userInfo.DC_EMIADDR);else{if($(".k-grid-update").text("수정"),$(".k-grid-cancel").text("취소"),$(".k-window-title").text("QA 등록"),$(".k-grid-update").attr("onClick",function(){e.model.dirty=!0}),"002"==e.model.CD_ANSSTAT||"003"==e.model.CD_ANSSTAT){$($("#k-edi").data().kendoEditor.body).attr("contenteditable",!1),angular.element("#DC_INQTITLE").attr("readonly",!0),angular.element("#DC_INQEMI").attr("readonly",!0),angular.element("#NO_INQCEPH").attr("readonly",!0),angular.element("#NO_INQPHNE").attr("readonly",!0),$(".k-grid-update").hide(),$(".k-grid-cancel").text("확인");var t=[],a="",r={procedureParam:"USP_SY_16QAMNGFILES_GET&L_CD_REF1@s",L_CD_REF1:e.model.NO_QA};if(_.getList(r).then(function(e){t=e.data.results[0],angular.forEach(t,function(e){a+="<a href='"+g.fileUrl+"?NO_AT="+e.NO_AT+"&CD_AT="+e.CD_AT+"' download="+e.NM_FILE+"> "+e.NM_FILE+" </a></br>"}),$("#fileSlrInfo").append(a),t=e.data.results[1],a="",angular.forEach(t,function(e){a+="<a href='"+g.fileUrl+"?NO_AT="+e.NO_AT+"&CD_AT="+e.CD_AT+"' download="+e.NM_FILE+"> "+e.NM_FILE+" </a></br>"}),$("#fileMngInfo").append(a)}),"003"==e.model.CD_ANSSTAT&&""==e.model.NM_ANSCFM&&""==e.model.DTS_ANSCFM){var r={procedureParam:"USP_SY_16QA_ANSCFM_UPDATE&L_NM_EMP@s|L_NO_QA@s",L_NM_EMP:C.userInfo.NM_EMP,L_NO_QA:e.model.NO_QA};_.getList(r)}}else if("001"==e.model.CD_ANSSTAT){var r={procedureParam:"USP_SY_16QASLRFILES_GET&L_CD_REF1@s",L_CD_REF1:e.model.NO_QA};_.getList(r).then(function(e){C.fileSlrDataVO.currentDataList=e.data.results[0]})}d(function(){f.isWriteable()||$(".k-grid-update").hide()})}},resizable:!0,rowTemplate:kendo.template($.trim($("#sy_qa_template").html())),altRowTemplate:kendo.template($.trim(angular.element(document.querySelector("#sy_qa_template")).html()).replace('class="k-grid-row"','class="k-alt"')),height:657};C.asrStsBind();var h=_.grid.getInquiryParam();d(function(){f.isWriteable()||$("#divSyQaGrd .k-grid-toolbar").hide(),h&&(C.contentText.value=h.L_CONT,C.answerStatusModel=h.L_CD_ANSSTAT,C.answerStatusBind.setSelectNames=h.L_CD_ANSSTAT_INDEX,C.datesetting.period.start=h.L_START_DATE,C.datesetting.period.end=h.L_END_DATE,a.gridSyQaVO.dataSource.read())},1e3),a.onOrdGrdCkboxClick=function(e){var t=$(e.currentTarget),r=t.is(":checked"),i=t.closest("tr"),n=a.syqakg,s=n.dataItem(i);s.ROW_CHK=r,r?i.addClass("k-state-selected"):i.removeClass("k-state-selected")},a.onOrdGrdCkboxAllClick=function(e){_.grdCkboxAllClick(e,a.syqakg)},a.qaDelete=function(){var e=a.syqakg,t=e._data,r=[];angular.forEach(t,function(e){e.ROW_CHK&&r.push(e.NO_QA)}),0==r.length?alert("삭제할 질문을 선택해주세요."):confirm("정말로 삭제하시겠습니까?")&&l.qaDelete(r).then(function(e){C.inQuiry()})}}])}(),function(){"use strict";angular.module("sy.Qa.service").factory("sy.QaSvc",["APP_CONFIG","$http",function(t,a){return{qaSave:function(e,r){return a({method:"POST",url:t.domain+"/sy/qaInsert/"+r,data:e})},qaDelete:function(r){return a({method:"POST",url:t.domain+"/sy/qaDelete",data:r}).success(function(e,t,a,r){alert(e)}).error(function(t,a,r,i){alert(t),e.error()})}}}])}(),function(){"use strict";var e=angular.module("sy.Itl",["sy.Itl.controller","sy.Itl.service"]);angular.module("sy.Itl.controller",[]),angular.module("sy.Itl.service",[]),e.config(["$stateProvider",function(e){e.state("app.syItl",{url:"/99sy/syItl?menu",views:{contentView:{templateUrl:"app/contents/99sy/sy17Itl/templates/sy.Itl.tpl.html",controller:"sy.ItlCtrl",resolve:{resData:["AuthSvc","$q","UtilSvc","$state",function(e,t,a,r){var i=t.defer(),n={},s=this;return e.isAccess().then(function(e){n.access=e[0],a.csMrkList().then(function(e){n.mngMrkData=e.data;var t={procedureParam:"MarketManager.USP_MA_07ITL_CODE_GET"};a.getList(t).then(function(e){n.stJobData=e.data.results[3];var t=a.grid.getInquiryParam(s.self.name);t?(n.mngMrkModel=t.mngMrkModel,n.mngMrkData.setSelectNames=t.mngMrkBindSelect,n.stJobModel=t.stJobModel,n.stJobData.setSelectNames=t.stJobBindSelect,n.start=t.start,n.end=t.end,n.selected="range"):(n.mngMrkModel="*",n.stJobModel="*",n.start=angular.copy(edt.getToday()),n.end=angular.copy(edt.getToday()),n.selected="1Week"),i.resolve(n)})})}),i.promise}]}}}})}])}(),function(){"use strict";angular.module("sy.Itl.controller").controller("sy.ItlCtrl",["$window","$scope","$http","$q","$log","ma.QaSvc","APP_CONFIG","APP_CODE","$timeout","resData","Page","UtilSvc","MenuSvc","Util01maSvc","APP_SA_MODEL",function(e,t,a,r,i,n,s,l,o,d,c,u,_,m,p){var f=(t.page=new c({auth:d.access}),edt.getToday(),{type:"string",editable:!1,nullable:!1}),D=t.itlDataVO={userInfo:JSON.parse(e.localStorage.getItem("USER")),boxTitle:"검색",settingMrk:{id:"CD_DEF",name:"NM_DEF",maxNames:2},setting:{id:"CD_DEF",name:"NM_DEF",maxNames:3},datesetting:{dateType:"market",buttonList:["current","1Day","1Week","1Month","range"],selected:d.selected,period:{start:d.start,end:d.end}},mngMrkModel:d.mngMrkModel,mngMrkBind:d.mngMrkData,stJobModel:d.stJobModel,stJobBind:d.stJobData};D.reset=function(){var e=this;e.datesetting.period.start=angular.copy(edt.getToday()),e.datesetting.period.end=angular.copy(edt.getToday()),e.datesetting.selected="1Week",e.mngMrkBind.bReset=!0,e.stJobBind.bReset=!0},D.init=function(){angular.forEach(t.gridMidVO,function(e,a){e=t.gridMidVO.addCommonGridVO(e,a)}),angular.forEach(t.gridTabVO,function(e,a){e=t.gridTabVO.addCommonGridVO(e,a)}),D.search()};var C="50px",g="140px",h="0px",T="text-overflow: ellipsis; white-space: nowrap; overflow:hidden;",N=[{field:"ROW_NUM",type:"number",width:C,attributes:{"class":"ta-r"},title:"번호"},{field:"DTS_FAIL",width:"120px",attributes:{"class":"ta-l",style:T},title:"실패일시"},{field:"NM_MRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓명"}],y=[{field:"DC_PROC",width:"120px",attributes:{"class":"ta-l",style:T},title:"처리사항"},{field:"CNT_SCD",width:"120px",attributes:{"class":"ta-r",style:T},title:"예정"},{field:"CNT_CPLT",width:"120px",attributes:{"class":"ta-r",style:T},title:"완료"},{field:"CNT_ERR",width:"120px",attributes:{"class":"ta-r",style:T},title:"추후 재실행"}],S=[{field:"DC_PROC",width:"120px",attributes:{"class":"ta-l",style:T},title:"처리사항"},{field:"CNT_SCD",width:"120px",attributes:{"class":"ta-r",style:T},title:"예정"},{field:"CNT_CPLT",width:"120px",attributes:{"class":"ta-r",style:T},title:"완료"},{field:"CNT_ERR",width:"120px",attributes:{"class":"ta-r",style:T},title:"추후 재실행"}],E=[{field:"ROW_NUM",type:"number",width:C,attributes:{"class":"ta-r"},title:"번호"},{field:"NM_MNGMRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"관리마켓명"},{field:"NM_MRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓명"},{field:"DC_MRKID",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓아이디"},{field:"process_result",width:"70px",attributes:{"class":"ta-c",style:T},title:"처리상태"},{field:"req_datetime",width:g,attributes:{"class":"ta-c",style:T},title:"처리일시"},{field:"info_type",width:"70px",attributes:{"class":"ta-l",style:T},title:"정보유형"},{field:"orderNo",width:"130px",attributes:{"class":"ta-c",style:T},title:"주문번호"},{field:"productOrderNo",width:"130px",attributes:{"class":"ta-l",style:T},title:"상품주문번호"},{field:"mallOrderNo",width:"130px",attributes:{"class":"ta-l",style:T},title:"마켓주문번호"},{field:"paymentNo",width:"120px",attributes:{"class":"ta-l",style:T},title:"결재번호"},{field:"definiteOrderDate",width:g,attributes:{"class":"ta-c",style:T},title:"주문확정일시"},{field:"DC_TEMP",width:h,attributes:{"class":"ta-c",style:T},title:" "}],v=[{field:"ROW_NUM",type:"number",width:C,attributes:{"class":"ta-r"},title:"번호"},{field:"NM_MNGMRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"관리마켓명"},{field:"NM_MRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓명"},{field:"DC_MRKID",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓아이디"},{field:"process_result",width:"70px",attributes:{"class":"ta-c",style:T},title:"처리상태"},{field:"req_datetime",width:g,attributes:{"class":"ta-c",style:T},title:"처리일시"},{field:"info_type",width:"70px",attributes:{"class":"ta-c",style:T},title:"정보유형"},{field:"orderNo",width:"130px",attributes:{"class":"ta-c",style:T},title:"주문번호"},{field:"productOrderNo",width:"130px",attributes:{"class":"ta-l",style:T},title:"상품주문번호"},{field:"mallOrderNo",width:"130px",attributes:{"class":"ta-l",style:T},title:"마켓주문번호"},{field:"paymentNo",width:"120px",attributes:{"class":"ta-l",style:T},title:"결재번호"},{field:"deliveryDivision",width:"120px",attributes:{"class":"ta-l",style:T},title:"배송구분"},{field:"delivery_type",width:"120px",attributes:{"class":"ta-l",style:T},title:"택배사"},{field:"invoiceNo",width:"120px",attributes:{"class":"ta-l",style:T},title:"송장번호"},{field:"invoiceInsertedDate",width:g,attributes:{"class":"ta-c",style:T},title:"요청일시"},{field:"DC_TEMP",width:h,attributes:{"class":"ta-c",style:T},title:" "}],M=[{field:"ROW_NUM",type:"number",width:C,attributes:{"class":"ta-r"},title:"번호"},{field:"NM_MNGMRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"관리마켓명"},{field:"NM_MRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓명"},{field:"DC_MRKID",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓아이디"},{field:"process_result",width:"70px",attributes:{"class":"ta-c",style:T},title:"처리상태"},{field:"req_datetime",width:g,attributes:{"class":"ta-c",style:T},title:"처리일시"},{field:"info_type",width:"70px",attributes:{"class":"ta-c",style:T},title:"정보유형"},{field:"requesteNo",width:"130px",attributes:{"class":"ta-c",style:T},title:"요청번호"},{field:"claimType",width:"70px",attributes:{"class":"ta-c",style:T},title:"요청유형"},{field:"requestDate",width:g,attributes:{"class":"ta-c",style:T},title:"요청일시"},{field:"product_order_no",width:"130px",attributes:{"class":"ta-l",style:T},title:"상품주문번호"},{field:"mallOrderNo",width:"130px",attributes:{"class":"ta-l",style:T},title:"마켓주문번호"},{field:"payment_no",width:"120px",attributes:{"class":"ta-l",style:T},title:"결재번호"},{field:"permission_date",width:g,
attributes:{"class":"ta-c",style:T},title:"승인/거부일시"},{field:"permission_person",width:"100px",attributes:{"class":"ta-c",style:T},title:"승인/거부 입력자"},{field:"rejection_type",width:"120px",attributes:{"class":"ta-c",style:T},title:"거부구분"},{field:"rejection_reason",width:"120px",attributes:{"class":"ta-l",style:T},title:"거부내용"},{field:"deliveryDivision",width:"100px",attributes:{"class":"ta-c",style:T},title:"배송구분"},{field:"delivery_type",width:"70px",attributes:{"class":"ta-c",style:T},title:"택배사명"},{field:"invoiceNo",width:"120px",attributes:{"class":"ta-l",style:T},title:"송장번호"},{field:"pickupStatue",width:"110px",attributes:{"class":"ta-c",style:T},title:"교환상품수거여부"},{field:"DC_TEMP",width:h,attributes:{"class":"ta-c",style:T},title:" "}],b=[{field:"ROW_NUM",type:"number",width:C,attributes:{"class":"ta-r"},title:"번호"},{field:"NM_MNGMRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"관리마켓명"},{field:"NM_MRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓명"},{field:"DC_MRKID",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓아이디"},{field:"process_result",width:"70px",attributes:{"class":"ta-c",style:T},title:"처리상태"},{field:"process_date",width:g,attributes:{"class":"ta-c",style:T},title:"처리일시"},{field:"inquiryNo",width:"130px",attributes:{"class":"ta-l",style:T},title:"문의번호"},{field:"inquiryDivisionCode",width:"70px",attributes:{"class":"ta-l",style:T},title:"문의유형"},,{field:"inquiryStatueCode",width:"80px",attributes:{"class":"ta-c",style:T},title:"문의상태명"},{field:"regDate",width:g,attributes:{"class":"ta-c",style:T},title:"접수일시"},{field:"req_person",width:"70px",attributes:{"class":"ta-c",style:T},title:"접수자"},{field:"mallOrderNo",width:"130px",attributes:{"class":"ta-l",style:T},title:"주문번호"},{field:"mallItemCode",width:"130px",attributes:{"class":"ta-l",style:T},title:"상품번호"},{field:"replyContents",width:"150px",attributes:{"class":"ta-l",style:T},title:"답변내용"},{field:"replyDate",width:g,attributes:{"class":"ta-c",style:T},title:"답변날짜"},{field:"replyPerson",width:"70px",attributes:{"class":"ta-c",style:T},title:"답변자"},{field:"DC_TEMP",width:h,attributes:{"class":"ta-c",style:T},title:" "}],A=[{field:"ROW_NUM",type:"number",width:C,attributes:{"class":"ta-r"},title:"번호"},{field:"NM_MNGMRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"관리마켓명"},{field:"NM_MRK",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓명"},{field:"DC_MRKID",width:"120px",attributes:{"class":"ta-l",style:T},title:"마켓아이디"},{field:"process_result",width:"65px",attributes:{"class":"ta-c",style:T},title:"처리상태"},{field:"req_datetime",width:g,attributes:{"class":"ta-c",style:T},title:"처리일시"},{field:"mall_no",width:"80px",attributes:{"class":"ta-l",style:T},title:"쇼핑몰구분"},{field:"info_type",width:"65px",attributes:{"class":"ta-l",style:T},title:"정보유형"},{field:"orderNo",width:"128px",attributes:{"class":"ta-c",style:T},title:"주문번호"},{field:"mallOrderNo",width:"88px",attributes:{"class":"ta-l",style:T},title:"마켓주문번호"},{field:"mallItemNo",width:"128px",attributes:{"class":"ta-l",style:T},title:"마켓상품번호"},{field:"paymentNo",width:"80px",attributes:{"class":"ta-l",style:T},title:"결재번호"},{field:"deliveryDivision",width:"85px",attributes:{"class":"ta-c",style:T},title:"배송구분"},{field:"delivery_type",width:"70px",attributes:{"class":"ta-c",style:T},title:"택배사명"},{field:"invoiceNo",width:"80px",attributes:{"class":"ta-l",style:T},title:"송장번호"},{field:"updatedDeliveryDivision",width:"80px",attributes:{"class":"ta-l",style:T},title:"수정할배송구분"},{field:"updatedDeliveryType",width:"80px",attributes:{"class":"ta-l",style:T},title:"수정할택배사명"},{field:"updatedInvoiceNo",width:"80px",attributes:{"class":"ta-l",style:T},title:"수정할송장번호"},{field:"DC_TEMP",width:h,attributes:{"class":"ta-c",style:T},title:" "}];u.gridtooltipOptions.filter="td",D.tooltipOptions=u.gridtooltipOptions,D.search=function(){var e=this,a={procedureParam:"USP_SY_17ITL_SEARCH&L_LIST01@s|L_LIST02@s|L_START_DATE@s|L_END_DATE@s",L_LIST01:e.mngMrkModel,L_LIST02:e.stJobModel,L_START_DATE:new Date(e.datesetting.period.start.y,e.datesetting.period.start.m-1,e.datesetting.period.start.d).dateFormat("Ymd"),L_END_DATE:new Date(e.datesetting.period.end.y,e.datesetting.period.end.m-1,e.datesetting.period.end.d).dateFormat("Ymd")};u.getList(a).then(function(a){t.ordkg.dataSource.data(a.data.results[0]),t.trankg.dataSource.data(a.data.results[1]),t.cankg.dataSource.data(a.data.results[2]),t.cskg.dataSource.data(a.data.results[3]),t.shikg.dataSource.data(a.data.results[4]),t.gridMidVO[0].dataSource.data(a.data.results[5]),t.gridMidVO[1].dataSource.data(a.data.results[6]),t.gridMidVO[2].dataSource.data(a.data.results[7]);var r={mngMrkModel:e.mngMrkModel,mngMrkBindSelect:e.mngMrkBind.allSelectNames,stJobModel:e.stJobModel,stJobBindSelect:e.stJobBind.allSelectNames,start:e.datesetting.period.start,end:e.datesetting.period.end};u.grid.setInquiryParam(r)})},D.isOpen=function(e){},D.columnProc=function(e){if(void 0!==e){for(var t={headerAttributes:{"class":"table-header-cell",style:"text-align: center; font-size: 12px; vertical-align:middle;"}},a=[],r=0;r<e.length;r++){var i=angular.extend(t,e[r]);a.push(angular.copy(i))}return a}};var P=t.gridMidVO=[{boxTitle:"로그인 실패한 마켓리스트",defFields:{ROW_NUM:{type:"number",editable:!1,nullable:!1},DTS_FAIL:f,NM_MRK:f},defColumns:N},{boxTitle:"연동 통계 건수",defFields:{DC_PROC:f,CNT_SCD:f,CNT_CPLT:f,CNT_ERR:f},defColumns:y},{boxTitle:"연동 통계 건수",defFields:{DC_PROC:f,CNT_SCD:f,CNT_CPLT:f,CNT_ERR:f},defColumns:S}];P.addCommonGridVO=function(e,t){var a=e;return a.iIndex=t,a.autoBind=!1,a.messages={requestFailed:"정보를 가져오는 중 오류가 발생하였습니다.",commands:{update:"저장",canceledit:"취소"},noRecords:"검색된 데이터가 없습니다."},a.sortable=!0,a.noRecords=!0,a.dataSource=new kendo.data.DataSource({transport:{},batch:!0,schema:{model:{fields:a.defFields}}}),a.navigatable=!0,a.selectable="multiple",a.columns=D.columnProc(a.defColumns),a.collapse=function(e){this.cancelRow()},a.resizable=!0,a.height=120,a};var O=t.gridTabVO=[{defFields:{ROW_NUM:{type:"number",editable:!1,nullable:!1},NM_MNGMRK:f,NM_MRK:f,DC_MRKID:f,orderNo:f,productOrderNo:f,mallOrderNo:f,paymentNo:f,definiteOrderDate:f,process_result:f,req_datetime:f,result_msg:f,DC_TEMP:f},defColumns:E},{defFields:{ROW_NUM:{type:"number",editable:!1,nullable:!1},NM_MNGMRK:f,NM_MRK:f,DC_MRKID:f,orderNo:f,productOrderNo:f,mallOrderNo:f,paymentNo:f,deliveryDivision:f,delivery_type:f,invoiceNo:f,invoiceInsertedDate:f,process_result:f,req_datetime:f,result_msg:f,DC_TEMP:f},defColumns:v},{defFields:{ROW_NUM:{type:"number",editable:!1,nullable:!1},NM_MNGMRK:f,NM_MRK:f,DC_MRKID:f,requesteNo:f,claimType:f,requestDate:f,product_order_no:f,mallOrderNo:f,payment_no:f,permission_date:f,permission_person:f,rejection_type:f,rejection_reason:f,process_result:f,req_datetime:f,result_msg:f,deliveryDivision:f,delivery_type:f,invoiceNo:f,pickupStatue:f,DC_TEMP:f},defColumns:M},{defFields:{ROW_NUM:{type:"number",editable:!1,nullable:!1},NM_MNGMRK:f,NM_MRK:f,DC_MRKID:f,inquiryStatueCode:f,regDate:f,req_person:f,inquiryDivisionCode:f,mallItemCode:f,mallOrderNo:f,inquiryNo:f,replyContents:f,replyDate:f,replyPerson:f,process_result:f,process_date:f,result_msg:f,DC_TEMP:f},defColumns:b},{defFields:{ROW_NUM:{type:"number",editable:!1,nullable:!1},NM_MNGMRK:f,NM_MRK:f,DC_MRKID:f,mall_no:f,info_type:f,orderNo:f,mallOrderNo:f,mallItemNo:f,paymentNo:f,deliveryDivision:f,delivery_type:f,invoiceNo:f,updatedDeliveryDivision:f,updatedDeliveryType:f,updatedInvoiceNo:f,process_result:f,req_datetime:f,result_msg:f,DC_TEMP:f},defColumns:A}];O.addCommonGridVO=function(e,t){var a=e;return a.iIndex=t,a.autoBind=!1,a.messages={requestFailed:"정보를 가져오는 중 오류가 발생하였습니다.",noRecords:"검색된 데이터가 없습니다."},a.sortable=!0,a.pageable={messages:u.gridPageableMessages},a.noRecords=!0,a.dataSource=new kendo.data.DataSource({transport:{},pageSize:13,batch:!0,schema:{model:{id:"ROW_NUM",fields:a.defFields}}}),a.navigatable=!0,a.columns=D.columnProc(a.defColumns),a.collapse=function(e){this.cancelRow()},a.resizable=!0,a.height=449,a},D.init()}])}(),function(){"use strict";angular.module("sy.Itl.service").factory("sy.ItlSvc",["APP_CONFIG","$http",function(t,a){return{itlSearch:function(r){return a({method:"POST",url:t.domain+"/sy/qaDelete",data:r}).success(function(e,t,a,r){alert(e)}).error(function(t,a,r,i){alert(t),e.error()})}}}])}();